"use strict";window.NP_ENV={PAYPAL_ENV:"production",PAYPAL_CLIENT:{},API_HOST:"",STATIC_HOST:"https://cdn.cloud360.top",STATIC_PATH:"https://cdn.cloud360.top/s/files",CART_DEFAULT_IMAGES:"https://cdn.cloud360.top/theme/faker/pic-4.png"},$(function(){window.NP_ENV.config={host:location.host,href:location.href,cartType:"1",cartToken:"",copyCouponCode:"",coupon_code:"",location:"",show_buycart:!1,currencyList:null,currencyEntity:{currency_code:$(".J-currency-code").val(),symbol:$(".J-currency-code").data("symbol"),rate_value:$(".J-currency-code").data("rate-value"),currency_text:"",current_currency_code:$(".J-currency-code").data("currency")},initialCurrency:$(".J-currency-code").data("currency"),headcode:$(".J-currency-code").val(),headsymbol:$(".J-currency-code").data("symbol"),headRateValue:$(".J-currency-code").data("rate-value"),headCurrencyText:"",navigator:navigator.userAgent.toLowerCase(),isMobile:/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent),scrollPosition:0,holidayStyle:"default",EmailReg:"^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$",availWidth:0,pagelocation:$(".nickp-event-page-location").val(),index:{},products:{},collections:{},cart:{},orders:{},coupon_tips:function(e,t){var a="";switch(e+=""){case"1":a='<p class="erro-tips">This code did not match any active gift card or discount. Was it entered correctly?</p>';break;case"2":case"3":a='<p class="erro-tips">Your cart does not meet the requirements for the <strong>'+t+"</strong> Coupon code</p>";break;case"20001":a='<p class="erro-tips">超过使用次数限制</p>';break;case"20002":a='<p class="erro-tips">邮箱为空</p>';break;case"20003":a='<p class="erro-tips">超过一次使用限制</p>';break;case"20004":a='<p class="erro-tips">超出人群限制</p>'}return a},isCloseMask:function(){$(".popups-section").is(":visible")||$(".J-ModelDiscountPopup").hasClass("model-discount-popup--show")||NP_ENV.config.mask_layer("hide")},mask_layer:function(e){"hide"==e?($(".J-Mask").hide(),$("html, body").removeClass("hidden").css("top",""),$("html, body").animate({scrollTop:NP_ENV.config.scrollPosition},0)):"show"==e&&($(".J-Mask").show(),NP_ENV.config.scrollPosition=$(window).scrollTop(),$("html, body").addClass("hidden").css("top","-"+NP_ENV.config.scrollPosition+"px"))},localeString:function(e,t,a,n){var i="orders"==this.pagelocation?this.headcode:NP_ENV.config.currencyEntity.currency_code,o=1<"BRL,EUR".split(i).length?"de-DE":"en-US",r="orders"==this.pagelocation?this.headsymbol:NP_ENV.config.currencyEntity.symbol;if(e=parseFloat(e).toLocaleString(o,{minimumFractionDigits:NP_ENV.config.to_fixed_val,maximumFractionDigits:NP_ENV.config.to_fixed_val}),!a)return""+(r+e);a.text(n?"":i+" "+(r+e))}},900<=window.screen.availWidth?NP_ENV.config.availWidth=1080:window.screen.availWidth<900<=750?NP_ENV.config.availWidth=900:NP_ENV.config.availWidth=750});var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(y,e){var t=function(){function e(){_classCallCheck(this,e),this.total=0,this.cart_json=null,this.targetsList=[],this.isDefaultCurrency=!1,this.last_completed_target=null,this.completed_target=null,this.next_target=null,this.cart_progress_bar_json={},this.cart_page_width=0,this.sideslip_cart_width=0}return _createClass(e,[{key:"init",value:function(){this.cart_progress_bar_json=0<y(".J-CartProgressBarSection").length?y(".J-CartProgressBarSection").data("json"):{}}},{key:"getProgressBarWidth",value:function(){0<y(".J-CartPageProgressBar").length&&(this.cart_page_width=y(".J-CartPageProgressBar").find(".J-CartNextTargetText").width()),0<y(".J-SideslipCartProgressBar").length&&(this.sideslip_cart_width=y(".J-SideslipCartProgressBar").find(".J-CartNextTargetText").width())}},{key:"resizeConfig",value:function(){var t=this;this.getProgressBarWidth();var a=0,n=JSON.parse(JSON.stringify(this.targetsList));n.map(function(e){1==t.cart_progress_bar_json.conf.settings.distribution&&(e.width=(t.sideslip_cart_width-24*n.length)/n.length,e.cart_width=0<t.cart_page_width?(t.cart_page_width-24*n.length)/n.length:0),2==t.cart_progress_bar_json.conf.settings.distribution&&(e.width=(e.targetAmount-a)/n[n.length-1].targetAmount*(t.sideslip_cart_width-24*n.length),e.cart_width=0<t.cart_page_width?(e.targetAmount-a)/n[n.length-1].targetAmount*(t.cart_page_width-24*n.length):0),a=e.targetAmount}),this.completed_target||(this.last_completed_target=null),this.render(n,!0)}},{key:"generateConfig",value:function(e){var n=this;if(0==e.quantity&&"0.00"==e.total?(0<y(".J-CartProgressBarSection").length&&y(".J-CartProgressBarSection").hide(),0<y(".J-SideslipCartProgressBar").length&&y(".J-SideslipCartProgressBar").hide()):(0<y(".J-CartProgressBarSection").length&&y(".J-CartProgressBarSection").show(),0<y(".J-SideslipCartProgressBar").length&&y(".J-SideslipCartProgressBar").show()),0==e.quantity&&"0.00"==e.total||this.cart_json&&this.cart_json.total==e.total&&this.cart_json.quantity==e.quantity)return!1;this.getProgressBarWidth(),null!=this.completed_target&&this.completed_target.enabled&&(this.last_completed_target=JSON.parse(JSON.stringify(this.completed_target))),this.next_target=null,this.completed_target=null,this.cart_total=JSON.parse(JSON.stringify(e)),this.isDefaultCurrency=NP_ENV.config.initialCurrency==NP_ENV.config.currencyEntity.current_currency_code,this.cart_json=JSON.parse(JSON.stringify(e)),this.total=1==this.cart_progress_bar_json.conf.progressType?e.quantity:e.total;var i=[],t=JSON.parse(JSON.stringify(this.cart_progress_bar_json.conf.targets));t.sort(function(e,t){return e.targetAmount-t.targetAmount}),t.map(function(e,t){var a=JSON.parse(JSON.stringify(e));a.index=t+1,a.icon_show=!1,a.targetAmount<=n.total&&(a.icon_show=!0,n.completed_target=JSON.parse(JSON.stringify(a))),a.targetAmount>n.total&&null==n.next_target&&(a.icon_show=!0,n.next_target=JSON.parse(JSON.stringify(a))),1==n.cart_progress_bar_json.conf.settings.stageTargetDisplay&&(a.icon_show=!0,i.push(a)),2==n.cart_progress_bar_json.conf.settings.stageTargetDisplay&&(a.targetAmount<=n.total&&(i=[]).push(a),a.targetAmount>n.total&&(null==n.completed_target?i.length<2&&(1==i.length&&(a.iconUrl=""),i.push(a)):i.length<3&&(2==i.length&&(a.iconUrl=""),i.push(a))))});var a=0;i.map(function(e){1==n.cart_progress_bar_json.conf.settings.distribution&&(e.width=(n.sideslip_cart_width-24*i.length)/i.length,e.cart_width=0<n.cart_page_width?(n.cart_page_width-24*i.length)/i.length:0),2==n.cart_progress_bar_json.conf.settings.distribution&&(e.width=(e.targetAmount-a)/i[i.length-1].targetAmount*(n.sideslip_cart_width-24*i.length),e.cart_width=0<n.cart_page_width?(e.targetAmount-a)/i[i.length-1].targetAmount*(n.cart_page_width-24*i.length):0),a=e.targetAmount}),this.completed_target||(this.last_completed_target=null),this.render(i),this.targetsList=i}},{key:"render",value:function(e){var s=this,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],c="",l="";3<=e.length&&1==this.cart_progress_bar_json.conf.settings.showDescription?y(".J-CartProgressBarSection").find(".cart-progress-bar").addClass("cart-progress-bar-wide"):y(".J-CartProgressBarSection").find(".cart-progress-bar").removeClass("cart-progress-bar-wide"),e.map(function(e,t){var a="",n="",i="";if(s.next_target&&s.next_target.targetAmount==e.targetAmount&&(i="dialog-next"),s.completed_target&&s.completed_target.targetAmount==e.targetAmount&&(i="dialog-finish"),1==s.cart_progress_bar_json.conf.settings.stageTargetDisplay){if(e.icon_show&&(a='<div class="cart-progress-icon">\n                                    '+(1==s.cart_progress_bar_json.conf.settings.showIcon?'<span class="material-symbols-outlined">'+e.iconUrl+"</span>":"")+"\n                                </div>",1==s.cart_progress_bar_json.conf.settings.showDescription&&(1==e.discountType&&(n='<div class="cart-progress-icon-text">\n                                                <div class="cart-progress-dialog '+i+'">'+e.description.replace(/{奖励优惠}/gi,e.discountValue+"%")+"</div>\n                                            </div>"),2==e.discountType))){var o=s.isDefaultCurrency?e.discountValue:parseFloat(e.discountValue/NP_ENV.config.headRateValue*NP_ENV.config.currencyEntity.rate_value);n='<div class="cart-progress-icon-text">\n                                                <div class="cart-progress-dialog discount-price '+i+'" data-price="'+e.discountValueUsd+'" data-seller-price="'+o+'">'+e.description.replace(/{奖励优惠}/gi,""+NP_ENV.config.localeString(o))+"</div>\n                                            </div>"}}else if(e.icon_show&&(a='<div class="cart-progress-icon">\n                                        '+(1==s.cart_progress_bar_json.conf.settings.showIcon?'<span class="material-symbols-outlined">'+e.iconUrl+"</span>":"")+"\n                                </div>",1==s.cart_progress_bar_json.conf.settings.showDescription&&(1==e.discountType&&(n='<div class="cart-progress-icon-text">\n                                                <div class="cart-progress-dialog '+i+'">'+e.description.replace("{奖励优惠}",e.discountValue+"%")+"</div>\n                                            </div>"),2==e.discountType))){var r=s.isDefaultCurrency?e.discountValue:parseFloat(e.discountValue/NP_ENV.config.headRateValue*NP_ENV.config.currencyEntity.rate_value);n='<div class="cart-progress-icon-text">\n                                                <div class="cart-progress-dialog discount-price '+i+'" data-price="'+e.discountValueUsd+'" data-seller-price="'+r+'">'+e.description.replace(/{奖励优惠}/gi,""+NP_ENV.config.localeString(r))+"</div>\n                                            </div>"}c+='<div class="cart-progress-target-item">\n                            <div class="cart-progress-divination" style="width: '+e.width+'px;"></div>\n                            <div class="cart-progress-icon-node">\n                                '+a+"\n                                "+n+"\n                            </div>\n                        </div>",0<y(".J-CartPageProgressBar").length&&(l+='<div class="cart-progress-target-item">\n                            <div class="cart-progress-divination" style="width: '+e.cart_width+'px;"></div>\n                            <div class="cart-progress-icon-node">\n                                '+a+"\n                                "+n+"\n                            </div>\n                        </div>")}),y(".J-SideslipCartProgressBar").find(".J-CartProgressTarget").empty().append(c),0<y(".J-CartPageProgressBar").length&&y(".J-CartPageProgressBar").find(".J-CartProgressTarget").empty().append(l),t||(y(".J-CartNextTargetText").empty(),y(".J-CartCompletedTargetText").empty(),this.completed_target&&(this.completed_target.enabled&&this.animate(),this.updateCompletedTargetText()),this.next_target&&this.updateNextTargetText()),this.updateProgress(e)}},{key:"animate",value:function(){if(this.completed_target&&!this.last_completed_target||this.last_completed_target&&this.completed_target.targetAmount!==this.last_completed_target.targetAmount){var e='<div class="cart-progress-bar-animate"><img src="'+y(".static-path").data("static-path")+'img/cart-progress-bar.gif" alt=""></div>';y(".J-CartProgressBarSection").append(e),setTimeout(function(){y(".J-CartProgressBarSection").find(".cart-progress-bar-animate").remove()},5e3)}}},{key:"updateCompletedTargetText",value:function(){var e="";if(1!=this.cart_progress_bar_json.conf.settings.showCompleteDescription)return!1;if(1==this.completed_target.discountType)e=this.completed_target.afterReachTargetText.replace(/{奖励优惠}/gi,'<span style="font-weight: 700;">'+this.completed_target.discountValue+"%</span>");else{var t=this.isDefaultCurrency?this.completed_target.discountValue:parseFloat(this.completed_target.discountValue/NP_ENV.config.headRateValue*NP_ENV.config.currencyEntity.rate_value);e=this.completed_target.afterReachTargetText.replace(/{奖励优惠}/gi,'<span style="font-weight: 700;" class="discount-price" data-price="'+this.completed_target.discountValueUsd+'" data-seller-price="'+t+'">'+NP_ENV.config.localeString(t)+"</span>")}if(1==this.cart_progress_bar_json.conf.progressType)e=e.replace(/{消费目标}/gi,'<span style="font-weight: 700;">'+this.completed_target.targetAmount+"</span>");else{var a=this.isDefaultCurrency?this.completed_target.targetAmount:parseFloat(this.completed_target.targetAmount/NP_ENV.config.headRateValue*NP_ENV.config.currencyEntity.rate_value);e=e.replace(/{消费目标}/gi,'<span style="font-weight: 700;"  class="discount-price"  data-price="'+this.completed_target.discountValueUsd+'" data-seller-price="'+a+'">'+NP_ENV.config.localeString(a)+"</span>")}y(".J-CartCompletedTargetText").html(e)}},{key:"updateNextTargetText",value:function(){var e=this.next_target.beforeReachTargetText;if(1==this.cart_progress_bar_json.conf.progressType)e=(e=e.replace(/{达成目标距离}/gi,'<span style="font-weight: 700;">'+(this.next_target.targetAmount-this.total)+"</span>")).replace(/{消费目标}/gi,'<span style="font-weight: 700;">'+this.next_target.targetAmount+"</span>");else{var t=this.next_target.targetAmount-this.total;t=0<=(t=this.isDefaultCurrency?t:parseFloat(t/NP_ENV.config.headRateValue*NP_ENV.config.currencyEntity.rate_value))?t:0;var a=this.isDefaultCurrency?this.next_target.targetAmount:parseFloat(this.next_target.targetAmount/NP_ENV.config.headRateValue*NP_ENV.config.currencyEntity.rate_value);e=(e=e.replace(/{达成目标距离}/gi,'<span style="font-weight: 700;" class="discount-price"  data-price="'+this.next_target.discountValueUsd+'" data-seller-price="'+t+'">'+NP_ENV.config.localeString(t)+"</span>")).replace(/{消费目标}/gi,'<span style="font-weight: 700;"  class="discount-price"  data-price="'+this.next_target.discountValueUsd+'" data-seller-price="'+a+'">'+NP_ENV.config.localeString(a)+"</span>")}if(1==this.next_target.discountType)e=e.replace(/{奖励优惠}/gi,'<span style="font-weight: 700;">'+this.next_target.discountValue+"%</span>");else{var n=this.isDefaultCurrency?this.next_target.discountValue:parseFloat(this.next_target.discountValue/NP_ENV.config.headRateValue*NP_ENV.config.currencyEntity.rate_value);e=e.replace(/{奖励优惠}/gi,'<span style="font-weight: 700;" class="discount-price"  data-price="'+this.next_target.discountValueUsd+'" data-seller-price="'+n+'">'+NP_ENV.config.localeString(n)+"</span>")}y(".J-CartNextTargetText").html(e)}},{key:"updateProgress",value:function(e){var t="",a="",n=this.sideslip_cart_width-24*e.length,i=this.cart_page_width-24*e.length,o=n/e.length,r=i/e.length;if(y(".J-CartProgress").removeClass("cart-progress-finish"),this.total<e[e.length-1].targetAmount){if(1==this.cart_progress_bar_json.conf.settings.stageTargetDisplay&&1==this.cart_progress_bar_json.conf.settings.distribution){var s=this.completed_target?this.completed_target.index:0,c=this.completed_target?(this.total-this.completed_target.targetAmount)/(this.next_target.targetAmount-this.completed_target.targetAmount):this.total/this.next_target.targetAmount;t=o*s+c*o+24*s,a=r*s+c*r+24*s}if(1==this.cart_progress_bar_json.conf.settings.stageTargetDisplay&&2==this.cart_progress_bar_json.conf.settings.distribution){var l=this.completed_target?this.completed_target.index:0;t=this.total/e[e.length-1].targetAmount*n+24*l,a=this.total/e[e.length-1].targetAmount*i+24*l}if(2==this.cart_progress_bar_json.conf.settings.stageTargetDisplay&&1==this.cart_progress_bar_json.conf.settings.distribution){var d=this.completed_target?1:0,u=this.completed_target?(this.total-this.completed_target.targetAmount)/(this.next_target.targetAmount-this.completed_target.targetAmount):this.total/this.next_target.targetAmount;t=o*d+u*o+24*d,a=r*d+u*r+24*d}if(2==this.cart_progress_bar_json.conf.settings.stageTargetDisplay&&2==this.cart_progress_bar_json.conf.settings.distribution){var p=this.completed_target?1:0;t=this.total/e[e.length-1].targetAmount*n+24*p,a=this.total/e[e.length-1].targetAmount*i+24*p}}else t=y(".J-SideslipCartProgressBar").find(".J-CartNextTargetText").width(),a=0<y(".J-CartPageProgressBar").length?y(".J-CartPageProgressBar").find(".J-CartNextTargetText").width():0,y(".J-CartProgress").addClass("cart-progress-finish");y(".J-SideslipCartProgressBar").find(".J-CartProgress").css({width:t+"px"}),0<y(".J-CartPageProgressBar").length&&y(".J-CartPageProgressBar").find(".J-CartProgress").css({width:a+"px"})}}]),e}();e.$cartProgressBar=new t,setTimeout(function(){e.$cartProgressBar.init()},10),y(e).on("resize",function(){1==y(".J-IsOpenCartProgressBar").val()&&0<y(".J-CartProgressBarSection").length&&setTimeout(function(){e.$cartProgressBar.resizeConfig()},10)})}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(a,e){var t=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"orderTotalPriceLimit",value:function(e){var t=a(".order-page-limit-amount-mask").data("amount");parseFloat(e)>parseFloat(t)&&a(".order-page-limit-amount-mask").show()}}]),e}();e.$orderCommonFun=new t}(jQuery,window),function(i){function a(e,t){return this.$target=i(e),this.opts=i.extend({},n,t),void 0===this.isOpen&&this._init(),this}var s,c,l,d,u,p,n={loadingNotice:"Loading image",errorNotice:"The image could not be loaded",preventClicks:!0,onShow:void 0,onHide:void 0};a.prototype._init=function(){var t=this;this.$link=this.$target.find("a"),this.$image=this.$target.find("img"),this.$flyout=i('<div class="easyzoom-flyout" />'),this.$notice=i('<div class="easyzoom-notice" />'),this.$target.on("mouseenter.easyzoom touchstart.easyzoom",function(e){t.isMouseOver=!0,e.originalEvent.touches&&1!==e.originalEvent.touches.length||(e.preventDefault(),t.show(e))}).on("mousemove.easyzoom touchmove.easyzoom",function(e){t.isOpen&&(e.preventDefault(),t._move(e))}).on("mouseleave.easyzoom touchend.easyzoom",function(){t.isMouseOver=!1,t.isOpen&&t.hide()}),this.opts.preventClicks&&this.$target.on("click.easyzoom","a",function(e){e.preventDefault()})},a.prototype.show=function(e){var t,a,n,i,o=this;return this.isReady?(this.$target.append(this.$flyout),t=this.$target.width(),a=this.$target.height(),n=this.$flyout.width(),i=this.$flyout.height(),s=this.$zoom.width()-n,c=this.$zoom.height()-i,l=s/t,d=c/a,this.isOpen=!0,this.opts.onShow&&this.opts.onShow.call(this),void(e&&this._move(e))):void this._load(this.$link.attr("href"),function(){o.isMouseOver&&o.show(e)})},a.prototype._load=function(e,t){var a=this,n=new Image;this.$target.addClass("is-loading").append(this.$notice.text(this.opts.loadingNotice)),this.$zoom=i(n),n.onerror=function(){a.$notice.text(a.opts.errorNotice),a.$target.removeClass("is-loading").addClass("is-error")},n.onload=function(){0!==n.width&&(a.isReady=!0,a.$notice.detach(),a.$flyout.html(a.$zoom),a.$target.removeClass("is-loading").addClass("is-ready"),t())},n.style.position="absolute",n.src=e},a.prototype._move=function(e){if(0===e.type.indexOf("touch")){var t=e.touches||e.originalEvent.touches;u=t[0].pageX,p=t[0].pageY}else u=e.pageX||u,p=e.pageY||p;var a=this.$target.offset(),n=p-a.top,i=u-a.left,o=n*d,r=i*l;r<0||o<0||s<r||c<o?this.hide():this.$zoom.css({top:-1*Math.ceil(o)+"px",left:-1*Math.ceil(r)+"px"})},a.prototype.hide=function(){this.isOpen&&(this.$flyout.detach(),this.isOpen=!1,this.opts.onHide&&this.opts.onHide.call(this))},a.prototype.swap=function(e,t){this.hide(),this.isReady=!1,this.$target.removeClass("is-loading is-ready is-error"),this.$image.attr("src",e),this.$link.attr("href",t)},a.prototype.teardown=function(){this.hide(),this.$target.removeClass("is-loading is-ready is-error").off(".easyzoom"),delete this.$link,delete this.$zoom,delete this.$image,delete this.$notice,delete this.$flyout,delete this.isOpen,delete this.isReady},i.fn.easyZoom=function(t){return this.each(function(){var e=i.data(this,"easyZoom");e?void 0===e.isOpen&&e._init():i.data(this,"easyZoom",new a(this,t))})},"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports&&(module.exports=a)}(jQuery);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}$(function(){var u,s,e;u=$,s=window,e=function(){function e(){_classCallCheck(this,e),this.timer=null,this.utmParams=null,this.rules="",this.groupBuy={},this.isShowCountDown=!1,this.limitNewUser=!1,this.showCompletedPurchases=!1,this.isLogin="1"==u(".J-IsLogin").val(),this.isNewUser="1"==u(".J-IsLogin").data("is-new-user"),this.skuId="",this.groupId="",this.productId="",this.cartData={},this.activeGroups=[],this.groupPurchase={},this.homeActiveGroups=[],this.checkoutProgress=!1,this.groupBuyProgress={}}return _createClass(e,[{key:"init",value:function(){var o=this;this.utmParams=s.$plug.query(),this.getCartData(),"orders"==u(".nickp-event-page-location").val()&&this.utmParams.hasOwnProperty("needLogin")&&1==this.utmParams.needLogin&&"0"==u(".J-IsLogin").val()&&(window.location.href=u(".J-LoginUrl").val()),this.utmParams.hasOwnProperty("groupbuy_id")&&this.getJoinGroupList(),"index"!=u(".nickp-event-page-location").val()&&"custom"!=u(".nickp-event-page-location").val()&&"products"!=u(".nickp-event-page-location").val()&&"collections"!=u(".nickp-event-page-location").val()||this.getActiveGroups();var r=[];"my-group"==u(".nickp-event-page-location").val()&&u(".my-group-row").map(function(e,t){if(0<u(t).find(".group-countdown-section").length){var a=u(t).find(".group-countdown-section").data("end-time"),n=u(t).find(".group-countdown-section").data("group-id");if(-1==r.indexOf(n)){var i=a-((new Date).getTime()/1e3).toFixed(0);0<i?(console.log(i),o.startCountdown("user-group-countdown-"+n,i,function(){u(t).find(".group-countdown-section").hide()})):u(t).find(".group-countdown-section").hide()}}}),this.event()}},{key:"event",value:function(){var t=this;u(document).on("click",".J-StartGroupBuy",function(){if(!t.isLogin)return t.goLoginPage(),!1;!t.limitNewUser||t.limitNewUser&&t.isNewUser?(t.groupBuy={conf_id:u(this).data("conf-id"),limit_num:u(this).data("limit-num"),group_order_id:u(this).data("group-order-id")},t.showGroupDialog("start-section")):t.showGroupDialog("tips-section")}),u(document).on("click",".J-JoinGroupBuy",function(){if(!t.isLogin)return t.goLoginPage(),!1;!t.limitNewUser||t.limitNewUser&&t.isNewUser?(t.groupBuy={conf_id:u(this).data("conf-id"),limit_num:u(this).data("limit-num"),group_order_id:u(this).data("group-order-id")},t.showGroupDialog("join-section")):t.showGroupDialog("tips-section")}),u(document).on("click",".J-JoinGroupShare",function(){t.showGroupDialog("share-section")}),u(document).on("click",".group-rules > span",function(){t.showGroupDialog("rules-section")}),u(document).on("click",".J-GroupClose",function(){s.$groupBuying.groupBuy={},u(".group-btn").removeClass("btn-loading"),u(".group-purchase-rules-section-mask").removeClass("show"),u(".group-purchase-rules-section").removeClass("show"),setTimeout(function(){u(".group-purchase-rules-section-mask, .group-purchase-rules-section").hide(),u(".group-purchase-rules-section").removeClass("tips-section join-section rules-section start-section share-section ")},600)}),u(document).on("click",".J-GroupBuyCart",function(){u(this).addClass("btn-loading");var e=s.getProducts.cartData(),t={cart_data:{},cart_type:4,current_sku_id:"",current_product_id:""};t.cart_data=e.cart_data,t.cart_data.groupbuy=s.$groupBuying.groupBuy,t.current_sku_id=e.cart_data.sku_id,t.current_product_id=e.current_product_id,s.$api.addGroupBuy(t).then(function(e){0==e.code&&e.data&&(window.location.href="/checkouts/"+e.data.cart.token+"?step=contact_information")})}),u(document).on("click",".J-UserGroupShare",function(){var e={share:{share_x:{share_content:u(this).data("x-content"),social_link:u(this).data("x-share")},share_facebook:{social_link:u(this).data("facebook-share")},share_email:{email_title:u(this).data("email-title"),email_content:u(this).data("email-content")},share_url:{social_link:u(this).data("url")}}};t.buryingPoint(e),t.showGroupDialog("share-section")}),u(document).on("click",".J-GroupShareSocial > span",function(){var e=u(this).data("type");if("facebook"==e){var t=u(this).data("share");s.socialSharing.share_facebook(t)}if("twitter"==e){var a=u(this).data("share"),n=u(this).data("content");s.socialSharing.share_x(n,a)}if("email"==e){var i=u(this).data("title"),o=u(this).data("content");s.socialSharing.share_email(i,o)}}),u(document).on("click",".J-CopyText",function(){var e=u(".group-share-input").find("input").val();s.socialSharing.copyToClipboard(e)})}},{key:"getCartData",value:function(){"collections"==u(".nickp-event-page-location").val()&&(clearInterval(this.timer),this.cartData=s.getProducts.cartData(),this.skuId=this.cartData.cart_data.sku_id,this.productId=this.cartData.current_product_id,this.getGroupPurchase())}},{key:"getJoinGroupList",value:function(){var t=this,e={groupbuy_id:this.utmParams.groupbuy_id};s.$api.getJoinGroupList(e).then(function(e){0==e.code&&e.data&&(t.isShowCountDown=0!=e.data.is_show_count_down,t.limitNewUser=0!=e.data.limit_new_user,t.showCompletedPurchases=0!=e.data.show_completed_purchases,t.renderJoinGroupList(e.data))})}},{key:"getActiveGroups",value:function(){var t=this,e={};this.productId&&(e.product_id=this.productId),s.$api.getActiveGroups(e).then(function(e){0==e.code&&0<e.data.length&&(t.activeGroups=e.data,("index"==u(".nickp-event-page-location").val()&&1==u(".J-AppGroupBuy").data("homepage")||"custom"==u(".nickp-event-page-location").val()&&1==u(".J-AppGroupBuy").data("custompage")||"products"==u(".nickp-event-page-location").val()&&1==u(".J-AppGroupBuy").data("productpage"))&&t.renderHomeGroupBuy(),"collections"==u(".nickp-event-page-location").val()&&0<u(".group-Swiper").length&&t.renderProductGroupBuy())})}},{key:"getGroupPurchase",value:function(){var t=this,e={};"collections"==u(".nickp-event-page-location").val()&&(e.sku_id=this.skuId,e.product_id=this.productId),s.$api.getGroupPurchase(e).then(function(e){0==e.code&&e.data&&(t.isShowCountDown=0!=e.data.is_show_count_down,t.limitNewUser=0!=e.data.limit_new_user,t.showCompletedPurchases=0!=e.data.show_completed_purchases,t.rules=e.data.rules,t.groupPurchase=e.data,t.renderGroupPurchase(),u(".group-purchase-rules-section").find(".rules-content").html(e.data.rules))})}},{key:"renderGroupPurchase",value:function(){var t="",e=this.groupPurchase.end_time-((new Date).getTime()/1e3).toFixed(0);0<this.groupPurchase.list.length&&(this.groupPurchase.list.map(function(e){t+='<div class="group-refund-item">\n                                    <div class="group-subtitle"><strong>'+u(".group-refund-list").data("t-group-open")+'</strong></div>\n                                    <div class="group-des">'+u(".group-refund-list").data("t-invite-text")+" "+e.participants+" "+u(".group-refund-list").data("t-group-purchase")+'</div>\n                                    <div class="group-flex">\n                                        <div class="group-flex1">\n                                            <strong>'+e.price+'</strong>\n                                        </div>\n                                        <div>\n                                            <button class="group-btn primary J-StartGroupBuy" data-limit-num="'+e.participants+'" data-conf-id="'+e.conf_id+'" data-group-order-id="0">\n                                                <span class="btn-text" data-handler="nylon-tactical-belt">'+u(".group-refund-list").data("t-start-group")+"</span>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>"}),u(".group-purchase-section").show()),u(".group-purchase-section").find(".group-refund-list").empty().html(t),0<e?this.isShowCountDown?this.startCountdown("start-group-countdown-section",e,function(){u(".group-purchase-section").hide()}):u(".start-group-countdown-section").hide():u(".group-purchase-section").hide()}},{key:"renderJoinGroupList",value:function(e){var t=u(".join-group-section").data("t-group-people"),a=e.join_group_end_time-((new Date).getTime()/1e3).toFixed(0);this.buryingPoint(e),0<a?(this.startCountdown("join-group-countdown-section",a,function(){u(".join-group-section").hide()}),u(".J-JoinGroupBuy").data("conf-id",e.conf_id),u(".J-JoinGroupBuy").data("limit-num",e.limit_num),u(".J-JoinGroupBuy").data("group-order-id",e.group_order_id),u(".join-group-section").find(".group-subtitle").text(u(".join-group-section").find(".group-subtitle").data("t-created-by")+" "+e.email),u(".join-group-section").find(".group-people").text("("+e.num+"/"+e.limit_num+") "+t),u(".join-group-section").show()):u(".join-group-section").hide()}},{key:"renderHomeGroupBuy",value:function(){var e=this;0==this.homeActiveGroups.length&&(this.homeActiveGroups=JSON.parse(JSON.stringify(this.activeGroups)));var t=this.homeActiveGroups.shift(),a='<div class="group-buying-product">\n                                <div class="group-image"><img src="'+t.img+'" /></div>\n                                <div class="group-info">\n                                    '+t.email+" "+u(".J-AppGroupBuy").data("t-group-info")+"\n                                </div>\n                            </div>";u(".group-buying-successful-section").html(a),setTimeout(function(){u(".group-buying-successful-section").addClass("show translate3d")},8800),setTimeout(function(){u(".group-buying-successful-section").removeClass("show")},12800),setTimeout(function(){u(".group-buying-successful-section").removeClass("translate3d"),u(".group-buying-successful-section").empty()},13800),setTimeout(function(){e.renderHomeGroupBuy()},14300)}},{key:"renderProductGroupBuy",value:function(){var a="";this.activeGroups.map(function(e,t){a+='<div class="swiper-slide">\n                            <div class="swiper-group-product-item">\n                                <div class="swiper-slide-image"><img src="'+e.img+'" /></div>\n                                <div class="swiper-slide-info">'+e.email+" "+u(".J-AppGroupBuy").data("t-group-info")+"</div>\n                            </div>\n                        </div>"}),u(".group-completed-section").show(),u(".group-Swiper .swiper-wrapper").html(a),setTimeout(function(){new Swiper(".group-Swiper",{direction:"vertical",autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0})},100)}},{key:"startCountdown",value:function(r,s,c){var l=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],d=null;function e(){var e=s;if(l){var t=Math.floor(e/86400);e%=86400;var a=Math.floor(e/3600);e%=3600;var n=Math.floor(e/60);e%=60,u("."+r).html("\n                            <span>\n                            "+t.toString().padStart(2,"0")+" "+u(".J-AppGroupBuy").data("days-text")+":\n                            "+a.toString().padStart(2,"0")+" "+u(".J-AppGroupBuy").data("hours-text")+":\n                            "+n.toString().padStart(2,"0")+" "+u(".J-AppGroupBuy").data("min-text")+":\n                            "+e.toString().padStart(2,"0")+" "+u(".J-AppGroupBuy").data("sec-text")+"\n                            </span>\n                        ")}else{var i=Math.floor(e/3600);e%=3600;var o=Math.floor(e/60);e%=60,u("."+r).html("\n                            <span>\n                            "+i.toString().padStart(2,"0")+" :\n                            "+o.toString().padStart(2,"0")+" :\n                            "+e.toString().padStart(2,"0")+"\n                            </span>\n                        ")}s<=0?("start-group-countdown-section"==r?clearInterval(this.timer):clearInterval(d),c&&c()):s--}e(),"start-group-countdown-section"==r?this.timer=setInterval(e,1e3):d=setInterval(e,1e3)}},{key:"renderCheckoutProgress",value:function(e){if(e.hasOwnProperty("groupbuy_progress")){var t=e.groupbuy_progress.progress.end_time-((new Date).getTime()/1e3).toFixed(0);0<t?(u(".J-OrderCouponSection").hide(),this.checkoutProgress||(this.startCountdown("standard-order-web-countdown-section",t,function(){u(".group-buying-section").hide()}),this.checkoutProgress=!0),u(".J-OrderPeople").text(e.groupbuy_progress.progress.limit_num),u(".J-OrderCirclePeople").attr("data-text",u(".J-OrderCirclePeople").data("text")+"("+e.groupbuy_progress.cur_num+"/"+e.groupbuy_progress.progress.limit_num+")"),u(".J-OrderCirclePrice").attr("data-text",""+u(".J-OrderCirclePrice").data("text")+e.groupbuy_progress.progress.cur_conf.price),u(".group-buying-section").show()):(u(".J-OrderCouponSection").show(),u(".group-buying-section").hide())}if(0==u(".J-BalancePalSection").length){u(".order-payment-box").after('<div class="balance-pal-section J-BalancePalSection" style="display: none;">\n                                <div class="order-paypal-h3">\n                                    <div class="fl">\n                                        <span class="order-pay-balance-check J-CheckBalance"></span>\n                                        <span class="J-CheckBalancePrice"></span>\n                                    </div>\n                                    <div class="fr J-CheckBalanceUsageAmount"></div>\n                                </div>\n                            </div>')}0!=e.total.use_balance||"0.00"!=e.total.use_balance?(u(".J-BalanceSubtotal").text("- $"+e.total.use_balance),u(".J-CheckBalanceUsageAmount").text("- $"+e.total.use_balance),u(".J-BalanceInfo").removeClass("display-none")):(u(".J-CheckBalanceUsageAmount").text(""),u(".J-BalanceInfo").addClass("display-none")),"0.00"!=e.groupbuy.user_balance||0!=e.groupbuy.user_balance?(u(".J-BalancePalSection").show(),u(".J-CheckBalancePrice").text(u(".J-BalanceInfo").data("text")+" ("+e.groupbuy.user_balance+")")):u(".J-BalancePalSection").hide()}},{key:"buryingPoint",value:function(e){u(".group-purchase-rules-section").find(".group-share-input").find("input").val(e.share.share_url.social_link),u(".J-GroupShareSocial").find(".iconfont").eq(0).data("type","facebook"),u(".J-GroupShareSocial").find(".iconfont").eq(0).data("share",e.share.share_facebook.social_link),u(".J-GroupShareSocial").find(".iconfont").eq(1).data("type","twitter"),u(".J-GroupShareSocial").find(".iconfont").eq(1).data("content",e.share.share_x.share_content),u(".J-GroupShareSocial").find(".iconfont").eq(1).data("share",e.share.share_x.social_link),u(".J-GroupShareSocial").find(".iconfont").eq(2).data("type","email"),u(".J-GroupShareSocial").find(".iconfont").eq(2).data("title",e.share.share_email.email_title),u(".J-GroupShareSocial").find(".iconfont").eq(2).data("content",e.share.share_email.email_content)}},{key:"showGroupDialog",value:function(e){u(".group-purchase-rules-section-mask, .group-purchase-rules-section").show(),setTimeout(function(){u(".group-purchase-rules-section-mask").addClass("show"),u(".group-purchase-rules-section").addClass(e+" show")},200)}},{key:"goLoginPage",value:function(){s.location.href=u(".product-group-buying-section").data("login-url")}}]),e}(),s.$groupBuying=new e,setTimeout(function(){1==u(".J-AppGroupBuy").val()&&s.$groupBuying.init()},10)});var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(r,e){var t=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ajax",value:function(e,n,i,o){return new Promise(function(t,a){r.ajax({url:e,type:n,data:i,dataType:o,withCredentials:!0,contentType:"application/json",success:function(e){0<r(".J-Loading").length&&(r(".J-MaskLoad, .J-Loading").hide(),r("html, body").removeClass("hidden")),t(e)},error:function(e){0<r(".J-Loading").length&&(r(".J-MaskLoad, .J-Loading").hide(),r("html, body").removeClass("hidden")),a(e)}})}).catch(function(e){})}},{key:"paymentAjax",value:function(n,i){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return new Promise(function(t,a){var e={type:"post",data:i,url:n,dataType:"json",success:function(e){t(e)},error:function(e){a(e)}};o&&(e.contentType="application/json"),r.ajax(e)}).catch(function(e){})}},{key:"imgAjax",value:function(e,n){return new Promise(function(t,a){r.ajax({url:e,type:"POST",dataType:"json",timeout:12e4,cache:!1,data:n,processData:!1,contentType:!1,success:function(e){0==e.code?t(e):$plug.message.error(e.msg)},error:function(e){$plug.message.error(JSON.stringify(e)),a(e)}})}).catch(function(e){})}},{key:"xtag_ajax",value:function(e,n){return new Promise(function(t,a){r.ajax({data:n,url:e,success:function(e){t(e)},error:function(e){a(e)}})}).catch(function(e){})}},{key:"post",value:function(e,t){return this.ajax(e,"POST",t,"json")}},{key:"get",value:function(e,t){return this.ajax(e,"GET",t,"json")}},{key:"upload",value:function(e){var t=e.size/1024/1024,a=new FormData;return a.append("file",e),10<t?($plug.message.error(NP_ENV.language[NP_ENV.language.lang].image_erro),!1):this.imgAjax("/comm/upload/file",a)}},{key:"sharetag",value:function(e){return this.post("/buyer/logger/share",e||{})}},{key:"trackRecommend",value:function(e){return this.post("/buyer/statistics/recommend-logger",e||{})}},{key:"getCurrency",value:function(e){return this.post("/sail/currency/get-currency-list",e||{})}},{key:"toCart",value:function(e){return this.post("/buyer/cart/new-add",e||{})}},{key:"changeCart",value:function(e){return this.post("/buyer/cart/change",e||{})}},{key:"addToCart",value:function(e){return this.post("/buyer/cart/add",e||{})}},{key:"getCartList",value:function(e){return this.post("/buyer/cart",e||{})}},{key:"getShoppingList",value:function(e){return this.post("/order/cart",e||{})}},{key:"checkEmail",value:function(e){return this.post("/buyer/user/subscribe",e||{})}},{key:"getCountDown",value:function(e){return this.post("/buyer/plugin/count-down",e||{})}},{key:"getProductList",value:function(e){return this.post("/buyer/product/dynamic-loading-product",e||{})}},{key:"getProductDetailPop",value:function(e){return this.post("/buyer/product/pop-detail",e||{})}},{key:"getProductDetail",value:function(e){return this.post("/buyer/product/detail",e||{})}},{key:"clearRecentAll",value:function(e){return this.post("/buyer/product/rem-recent-all",e||{})}},{key:"clearRecent",value:function(e){return this.post("/buyer/product/rem-recent",e||{})}},{key:"getCartFreeExpress",value:function(e){return this.post("/buyer/express/free-express",e||{})}},{key:"getProductRecommend",value:function(e){return this.post("/buyer/product/recommend",e||{})}},{key:"getComment",value:function(e){return this.post("/buyer/comment/one",e||{})}},{key:"saveComment",value:function(e){return this.post("/buyer/comment/add",e||{})}},{key:"giveThumbs",value:function(e){return this.post("/buyer/comment/add-helpful",e||{})}},{key:"setCartRemark",value:function(e){return this.post("/order/cart/remark",e||{})}},{key:"getProductCoupon",value:function(e){return this.post("/buyer/order/product-coupon-info",e||{})}},{key:"clearProductCoupon",value:function(e){return this.post("/order/cart/del-cart-filed",e||{})}},{key:"getCacheShoppingInfo",value:function(e){return this.post("/buyer/order/order-cache-billing-info",e||{})}},{key:"getOrderPaymentStatus",value:function(e){return this.post("/buyer/order/get-payment-status",e||{})}},{key:"getQuicklyPay",value:function(e){return this.post("/payment/paypal-union/is-created-express-pay",e||{})}},{key:"getOrderInfo",value:function(e){return this.post("/buyer/checkout",e||{})}},{key:"createOrder",value:function(e){return this.post("/buyer/order/create",e||{})}},{key:"createPaypalOrder",value:function(e){return this.post("/payment/paypal-union/create-order",e||{})}},{key:"savePaypalTokenInfo",value:function(e){return this.post("/payment/paypal-union/save-payment-token-info",e||{})}},{key:"paypalPayment",value:function(e){return this.post("/payment/paypal-union/capture-order",e||{})}},{key:"paypalPaymentInfo",value:function(e){return this.post("/payment/paypal-union/get-order-info",e||{})}},{key:"getIpDetail",value:function(e){return this.post("/buyer/user/ip-detail",e||{})}},{key:"getGoogleMap",value:function(e){return this.get("/buyer/user/google-map",e||{})}},{key:"getGoogleMapDetail",value:function(e){return this.get("/buyer/user/google-map-detail",e||{})}},{key:"getPhoneRules",value:function(e){return this.post("/buyer/express/get-phone-rules",e||{})}},{key:"getLocalPayment",value:function(e){return this.post("/payment/asiabill-local/get-pay-way",e||{})}},{key:"saveUnpayEmail",value:function(e){return this.post("/buyer/order/create-unpay-email",e||{})}},{key:"sendExpressEmail",value:function(e){return this.post("/buyer/express/send-mail",e||{})}},{key:"getUserAddressList",value:function(e){return this.post("/buyer/user-center/get-address",e||{})}},{key:"getUserAddressListById",value:function(e){return this.post("/buyer/region/get-region-by-address",e||{})}},{key:"searchCities",value:function(e){return this.post("/buyer/region/search-city",e||{})}},{key:"register",value:function(e){return this.post("/buyer/user/register",e||{})}},{key:"login",value:function(e){return this.post("/buyer/user/login",e||{})}},{key:"logout",value:function(e){return this.post("/buyer/user/logout",e||{})}},{key:"contactUs",value:function(e){return this.post("/buyer/page/contact-us",e||{})}},{key:"saveUserEmail",value:function(e){return this.post("/buyer/user/replace-email",e||{})}},{key:"resetUserEmail",value:function(e){return this.post("/buyer/user/reset-password-mail",e||{})}},{key:"resetEmail",value:function(e){return this.post("/buyer/user/confirm-replace-email",e||{})}},{key:"saveUserPassword",value:function(e){return this.post("/buyer/user/replace-password",e||{})}},{key:"resetUserPassword",value:function(e){return this.post("/buyer/user/reset-password",e||{})}},{key:"saveUserAddress",value:function(e){return this.post("/buyer/user-center/save-address",e||{})}},{key:"delUserAddress",value:function(e){return this.post("/buyer/user-center/del-address",e||{})}},{key:"getUserOrders",value:function(e){return this.post("/buyer/user-center/orders",e||{})}},{key:"saveProfile",value:function(e){return this.post("/buyer/user-center/save-profile",e||{})}},{key:"getTimezone",value:function(e){return this.post("/buyer/user-center/timezone",e||{})}},{key:"getAuthUrl",value:function(e){return this.post("/buyer/auth/url",e||{})}},{key:"getAddressLevel",value:function(e){return this.post("/buyer/region/get-region-child",e||{})}},{key:"getCountries",value:function(e){return this.post("/buyer/region/reached-countries",e||{})}},{key:"getOrderList",value:function(e){return this.post("/buyer/order/get-list",e||{})}},{key:"getTrackInfo",value:function(e){return this.post("/buyer/express/get-tracking",e||{})}},{key:"getBlogList",value:function(e){return this.post("/buyer/blog/get-blog-list",e||{})}},{key:"getBlogShare",value:function(e){return this.post("/buyer/blog/article-share",e||{})}},{key:"getProductsBlog",value:function(e){return this.get("/gateway/front-blog/article/byproducthandler",e||{})}},{key:"checkAuthEmail",value:function(e){return this.post("/buyer/auth/check-email",e||{})}},{key:"checkAuthPassword",value:function(e){return this.post("/buyer/auth/check-pwd",e||{})}},{key:"getAuthParamsUrl",value:function(e){return this.post("/buyer/auth/redirect-uri",e||{})}},{key:"saveconversionsApi",value:function(e){return this.post("/buyer/user/user-capi",e||{})}},{key:"getAsiabillToken",value:function(e){return this.post("/payment/asiabill-inner/token",e||{})}},{key:"getAsiabillCheck",value:function(e){return this.post("/payment/asiabill-inner/check",e||{})}},{key:"asiabillInnerCapture",value:function(e){return this.post("/payment/asiabill-inner/capture",e||{})}},{key:"nicoPayCreatePayment",value:function(e){return this.paymentAjax("/payment/nico-pay/create-payment",e||{})}},{key:"nicoPayCheckSuccess",value:function(e){return this.paymentAjax("/payment/nico-pay/check",e||{})}},{key:"scpayCreatePayment",value:function(e){return this.paymentAjax("/payment/scpay/create-payment",e||{})}},{key:"scLocalpayCreatePayment",value:function(e){return this.paymentAjax("/payment/scpay-local/create-payment",e||{})}},{key:"scpayCheckSuccess",value:function(e){return this.paymentAjax("/payment/scpay/check",e||{})}},{key:"getXBorderToken",value:function(e){return this.post("/payment/xborder/token",e||{})}},{key:"xBorderPayCapture",value:function(e){return this.post("/payment/xborder/capture",e||{})}},{key:"getLoggerInfo",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]}},{key:"queryExsit",value:function(e){return this.post("/buyer/upload/check-upload",e||{})}},{key:"getFileId",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.post("/buyer/upload/get-file-id",JSON.stringify(e))}},{key:"getProductCalculate",value:function(e){return this.post("/buyer/cod-theme/calculate",e||{})}},{key:"createCheckout",value:function(e){return this.post("/buyer/cod-theme/create",e||{})}},{key:"createUnpayOrder",value:function(e){return this.post("/buyer/cod-theme/create-unpay-order",e||{})}},{key:"scpayCardCreatePayment",value:function(e){return this.paymentAjax("/payment/scpay-card/create-payment",e||{})}},{key:"xPayCreatePayment",value:function(e){return this.paymentAjax("/payment/xpay/create-payment",e||{})}},{key:"zipQuery",value:function(e){return this.post("/buyer/zip/query",e||{})}},{key:"getEtracinPayToken",value:function(e){return this.post("/payment/etracin-pay/token",e||{})}},{key:"etracinPayCapture",value:function(e){return this.post("/payment/etracin-pay/capture",e||{})}},{key:"airwallexPayConfig",value:function(e){return this.post("/payment/airwallex/create-payment",e||{})}},{key:"pacyPayV3Config",value:function(e){return this.post("/payment/pacypay-v3/inner-payment",e||{})}},{key:"pacyPayV3CheckOrder",value:function(e){return this.post("/payment/pacypay-v3/check-order",e||{})}},{key:"payoneerCreatePayment",value:function(e){return this.paymentAjax("/payment/payoneer/save-payment",JSON.stringify(e||{}),!0)}},{key:"payoneerUpdatePayment",value:function(e){return this.paymentAjax("/payment/payoneer/update-payment",JSON.stringify(e||{}),!0)}},{key:"asiabillPayLogger",value:function(e){return this.post("/buyer/user/logger",e||{})}},{key:"airwallexSuccess",value:function(e){return this.post("/payment/airwallex/success ",e||{})}},{key:"oceanpayConfig",value:function(e){return this.paymentAjax("/payment/ocean-page/create-payment",JSON.stringify(e||{}),!0)}},{key:"oceanpayResult",value:function(e){return this.paymentAjax("/payment/ocean-page/result-handler",JSON.stringify(e||{}),!0)}},{key:"getProductsOfferPopup",value:function(e){return this.get("/plugins/recovery-coupon/api.php?r=buyer/get-config",e||{})}},{key:"setPopUpReport",value:function(e){return this.post("/plugins/recovery-coupon/api.php?r=buyer/popup",e||{})}},{key:"dLocalInnerPay",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.post("/payment/dlocal/inner",e)}},{key:"dLocalToPay",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.post("/payment/dlocal/topay",e)}},{key:"sirclepay",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.post("/payment/sirclepay/topay",e)}},{key:"payerMaxPayment",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.post("/payment/payermax/topay",e)}},{key:"onlyPayment",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.post("/payment/onlypay/topay",e)}},{key:"allPayment",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.post("/payment/allpayment/topay",e)}},{key:"payidPayment",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/payment/payid/topay",e,!0)}},{key:"getWalletPayCardUrl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/payment/allpayment/get-card-url",JSON.stringify(e),!0)}},{key:"getPayIDCardUrl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/payment/payid/get-card-url",JSON.stringify(e),!0)}},{key:"getKlashaInfo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.post("/payment/klasha/to-pay",e)}},{key:"klashaPayment",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.get("/payment/klasha/return",e)}},{key:"rapydPayment",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/payment/rapyd/create-pay",JSON.stringify(e||{}))}},{key:"rapydReturnUrl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.get("/payment/rapyd/return-url",e)}},{key:"paysnaaPayment",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/payment/paysnaa/create-pay",JSON.stringify(e||{}))}},{key:"paysnaaReturnUrl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.get("/payment/paysnaa/return-url",e)}},{key:"hpayPayment",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/payment/hpay/to-pay",JSON.stringify(e||{}))}},{key:"qipayPayment",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/payment/qipay/to-pay",JSON.stringify(e||{}))}},{key:"getActiveGroups",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/buyer/app-groupbuy/active-groups",JSON.stringify(e||{}))}},{key:"getGroupPurchase",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/buyer/app-groupbuy/group-purchase",JSON.stringify(e||{}))}},{key:"addGroupBuy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/buyer/app-groupbuy/add",JSON.stringify(e||{}))}},{key:"getFlywayPayInfo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax(" /payment/flyway/topay",JSON.stringify(e),!0)}},{key:"getJoinGroupList",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/buyer/app-groupbuy/join-group-list",JSON.stringify(e),!0)}},{key:"reportGroupBuying",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/buyer/app-groupbuy/report",JSON.stringify(e),!0)}},{key:"getTrckingInfo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/buyer/app-track/track-info",JSON.stringify(e),!0)}},{key:"getListPayInfo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.paymentAjax("/payment/list-pay/topay",e,!0)}}]),e}();e.$api=new t}(jQuery,window);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};$(function(){var win_navigator=navigator.userAgent.toLowerCase();window.$plug={loading:function(e){var t={title:"load",test:"正在加载..."},a="",n="string"==typeof e?e:e?this.merge(t,e):t;0<$(".J-MaskLoad").length?$(".J-Loading").text(n.test):(a+='<div class="nav-model-mask J-MaskLoad"><span class="nav-model-mask-close iconfont icon-close J-MaskLoadClose"></span></div>',a+='\n                    <div class="np-ui-loading J-Loading">\n                        <div class="load-icon"><img class="load-rotate" src="'+NP_ENV.STATIC_PATH+'/img/load.png" /></div>\n                        <div class="load-test">'+("string"==typeof e?n:n.test)+"</div>\n                    </div>\n                "),$("body").append(a),$(".J-MaskLoad, .J-Loading").show()},load:function(e){$(e).length&&$(e).append('<div class="ajax-loading J-AjaxLoad"><em class="load iconfont icon-jiazai"></em></div>')},closeLoad:function(e){$(e).find(".J-AjaxLoad").length&&$(e).find(".J-AjaxLoad").remove()},closeLoading:function(e){$(".J-MaskLoad, .J-Loading").hide(),e&&$(".J-MaskLoad").removeClass("payment-model-mask").remove("span")},alert:function(){},offerModal:function(e){$api.setPopUpReport(JSON.stringify({id:e.info.id,shop:window.location.origin})).then(function(e){console.log("上报成功 ==>> res",e)}),window.localStorage.setItem("products-offer-popup","1");var t="",a=e.coupon.coupon;if(e.info.coupon_text&&e.info.coupon_text.includes("{discount}")){var n=e.info.coupon_text?e.info.coupon_text.split("{discount}"):[];t=(0<n.length?n[0]:"")+" \n                            <strong>"+a+"</strong>\n                        "+(1<n.length?n[1]:"")}else t=e.info.coupon_text;if(0==$(".J-ProductsOfferPopup").length){var i='\n                <div class="products-offer-popup J-ProductsOfferPopup">\n                    <div class="offer-popup-title">\n                        <span class="J-OfferPopupColse iconfont icon-guanbi"></span>\n                        <div class="offer-popup-message">\n                            <img src="'+NP_ENV.STATIC_PATH+'/img/gift_3.png" />\n                        </div>\n                    </div>\n                    <div class="offer-popup-main">\n                        '+t+'\n                    </div>\n                    <div class="offer-popup-but"><span class="link J-OfferPopupLink">'+e.info.btn_text+"</span></div>\n                </div>";$("body").append(i),$(".J-Mask, .J-ProductsOfferPopup").show()}$(".J-OfferPopupColse").click(function(){$(".J-Mask, .J-ProductsOfferPopup").hide()}),$(".J-OfferPopupLink").click(function(){window.localStorage.setItem("coupon_code",""+e.info.coupon_code),$plug.message.success("Coupon code is successfully applied!"),$(".J-Mask, .J-ProductsOfferPopup").hide()})},testModal:function(e,t){var a=t?'<div class="np-ui-test-modal-mask J-TestModalMask"></div>':'<div class="np-ui-test-modal-mask gray J-TestModalMask"></div>';a+='  <div class="np-ui-test-modal J-TestModal"><span class="iconfont icon-close J-TestModalClose"></span>',"string"==typeof e||"number"==typeof e?a+="<p>You can only add "+e+" to the cart. </p>":0<e.length&&e.map(function(e){a+="<p>"+e+" </p>"}),a+="</div>",$("body").append(a)},tooltip:function(e,t,l,a){if(!e||"string"!=typeof e)return console.error(new Error('The "tooltip" method requires the "class" of at least one parameter')),!1;if(t&&"Object"==={}.constructor.name)var d=t.transition||!1,n=t.time||200,i=null;var o=document.querySelectorAll(e),u=document.createElement("div");function p(e){var t=null,a=null,n=null;if(0!==$(".colorList0").length)if(n=e.offsetParent,t=e.getBoundingClientRect().left,$(e).is(".color-tootipBox"))a=e.getBoundingClientRect().top;else for(a+=e.offsetTop;n;)-1===navigator.userAgent.indexOf("MSIE 8.0")&&(a+=n.clientTop),a+=n.offsetTop,n=n.offsetParent;else for(n=e.offsetParent,t+=e.offsetLeft,a+=e.offsetTop;n;)-1===navigator.userAgent.indexOf("MSIE 8.0")&&(t+=n.clientLeft,a+=n.clientTop),t+=n.offsetLeft,a+=n.offsetTop,n=n.offsetParent;return{left:t,top:a}}function y(e,t){i&&clearTimeout(i),e.style.setProperty("transition","opacity "+n/1e3+"s"),e.style.setProperty("-webkit-transition","opacity "+n/1e3+"s"),"enter"===t?(e.style.opacity=0,i=setTimeout(function(){e.style.opacity=1,"function"==typeof l&&l()},0)):"leave"===t&&(e.style.opacity=0,"function"==typeof a&&a(),i=setTimeout(function(){try{document.body.removeChild(e)}catch(e){}},n))}Array.prototype.slice.call(o).forEach(function(c){var e=c.offsetParent;if(0!==$(".showcase-body").length&&$(e).is(".grid-item-title")||0!==$(".pacific-body").length&&$(e).is(".grid-item-title"))return!1;c.addEventListener("mouseenter",function(){var e=p(c).left,t=p(c).top,a=c.offsetWidth,n=c.offsetHeight,i=c.getAttribute("data-tip"),o=c.getAttribute("data-direction")||"top";!function(e,t,a){if(e.innerHTML=t,e.className="tool_tip tool_tip_"+a,document.body.appendChild(e),!0===d)return y(e,"enter");"function"==typeof l&&l()}(u,i,o);var r=0===document.getElementsByClassName("tool_tip").length?0:document.getElementsByClassName("tool_tip")[0].offsetWidth,s=0===document.getElementsByClassName("tool_tip").length?0:document.getElementsByClassName("tool_tip")[0].offsetHeight;switch(o){case"top":u.style.left=e+a/2-r/2+"px",u.style.top=t-s-7+"px";break;case"left":u.style.left=e-r-7+"px",u.style.top=t+n/2-s/2+"px";break;case"right":u.style.left=e+a+7+"px",u.style.top=t+n/2-s/2+"px";break;case"bottom":u.style.left=e+a/2-r/2+"px",u.style.top=t+n+7+"px"}},!1),c.addEventListener("mouseleave",function(){var e=document.querySelector(".tool_tip");if(e){if(!0===d)return y(e,"leave");document.body.removeChild(e),"function"==typeof a&&a()}},!1)})},merge:function(e,t){for(var a in t)e[a]=t[a];return e},message:{timeS:null,timeR:null,success:function(e){this.init('<div class="np-ui-message-item msg-success J-MsgItem">'+e+"</div>")},info:function(e){this.init('<div class="np-ui-message-item msg-info J-MsgItem">'+e+"</div>")},warning:function(e){this.init('<div class="np-ui-message-item msg-warning J-MsgItem">'+e+"</div>")},error:function(e){this.init('<div class="np-ui-message-item msg-error J-MsgItem">'+e+"</div>")},init:function(e){clearTimeout(this.timeS),clearTimeout(this.timeR),$(".J-Msg").length?($(".J-Msg").empty(),$(".J-Msg").append(e)):(e='<div class="np-ui-message J-Msg">'+e+"</div>",$("body").append(e)),this.timeS=setTimeout(function(){$(".J-MsgItem").addClass("show")},300),this.timeR=setTimeout(function(){$(".J-MsgItem").removeClass("show"),setTimeout(function(){$(".J-Msg").empty()},500)},3e3)}},lazyLoad:function(e){var r,s="",c=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?"WAP":"PC";"WAP"==c&&(s="?x-oss-process=image/resize,w_640"),r=$(document).scrollTop()?parseInt($(document).scrollTop())+parseInt($(window).height())+10:parseInt($("html, body").scrollTop())+parseInt($(window).height())+10,e.map(function(e,t){var a=$(t).offset().top,n=t.tagName;if(a<r&&$(t).hasClass("lazy-load"))if("IMG"==n)$(t).attr("src",$(t).data("original")),$(t).addClass("blur-img").removeClass("lazy-load");else{var i="";$(t).parents(".banner")&&$(t).parents(".banner").hasClass("swiper-container")?"WAP"==c&&0<$(".template4-body").length&&(i="?x-oss-process=image/crop,w_640,g_center"):i=s;var o=new Image;o.src=$(t).data("original")+i,o.onload=function(){$(t).attr("style","background-image: url('"+$(t).data("original")+i+"');background-size: cover"),$(t).addClass("blur-img").removeClass("lazy-load")}}})},goTop:function(){$(document).on("click",".J-GoTop",function(){$("html, body").animate({scrollTop:"0"},300)})},query:function(){var a=new Object;window.location.search&&window.location.search.substr(1).split("&").forEach(function(e,t){a[e.split("=")[0]]=e.split("=")[1]});return a},Pages:function(e,t,a){if(0==a.length||a.length<=e)return $(".J-Pages").empty(),!1;var n="",i=parseInt(a/e),o=!1;i=a%e==0?i:i+1,1==t?$(".J-PagesPrev").hide():$(".J-PagesPrev").show(),t==i?$(".J-PagesLast").hide():$(".J-PagesLast").show();for(var r=1;r<=i;r++)r<=t&&1!=t&&(5<=t?(2==r&&(n+='<span class="pages-item J-PagesItem" data-index="">...</span>'),r==t&&!o&&(n+='<span class="pages-item J-PagesItem pages-item-active" data-index="'+r+'">'+r+"</span>",o=!0),(1==r||r==t-2||r==t-1)&&(n+='<span class="pages-item J-PagesItem" data-index="'+r+'">'+r+"</span>")):(r==t&&!o&&(n+='<span class="pages-item J-PagesItem pages-item-active" data-index="'+r+'">'+r+"</span>",o=!0),r!=t&&(n+='<span class="pages-item J-PagesItem" data-index="'+r+'">'+r+"</span>"))),t<=r&&(4<=i-t?(r==t&&!o&&(n+='<span class="pages-item J-PagesItem pages-item-active" data-index="'+r+'">'+r+"</span>",o=!0),(r==t+1||r==t+2||r==i)&&(n+='<span class="pages-item J-PagesItem" data-index="'+r+'">'+r+"</span>"),r==t+3&&(n+='<span class="pages-item J-PagesItem" data-index="">...</span>')):(r==t&&!o&&(n+='<span class="pages-item J-PagesItem pages-item-active" data-index="'+r+'">'+r+"</span>",o=!0),r!=t&&(n+='<span class="pages-item J-PagesItem" data-index="'+r+'">'+r+"</span>")));$(".J-PagesList").empty().append(n)},isSame:function(e){var t=!0,a=-1;0<e.length&&e.replace(/[^0-9]/gi,"").split("").map(function(e){a<0?a=e:a!=e&&(t=!1)});return t},toRawType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getToKen:function(e){var t=window.location.href.split("checkouts/")[1];return t=-1<t.indexOf("?")?t.split("?")[0]:t},replaceParam:function replaceParam(url,arg,arg_val){var href="",pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";tmp=url.replace(eval(tmp),replaceText),window.history.replaceState({},0,tmp)}else href=url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText,window.history.replaceState({},0,href)},Fingerprint2:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return new Promise(function(n,e){"function"==typeof Fingerprint2?Fingerprint2.get({excludes:{audio:!0,fonts:!0,webgl:!0,canvas:!0,userAgent:!0,fontsFlash:!0,enumerateDevices:!0}},function(e){var t=e.map(function(e){return e.value}),a=Fingerprint2.x64hash128(t.join(""),31);n(a)}):n("")})}),crc32:function(e,t){t==window.undefined&&(t=0);var a=0;t^=-1;for(var n=0,i=e.length;n<i;n++)a=255&(t^e.charCodeAt(n)),t=t>>>8^"0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*a,8);return-1^t},jsonSort:function(e){var t=[],a={};for(var n in e)t.push(n);for(var i in t.sort(),t)a[t[i]]=e[t[i]];return a},getCookieJSON:function(){var a={};return document.cookie.split(";").map(function(e){var t=e.split("=");e.includes("={")?a[t[0].trim()]=JSON.parse(t[1]):a[t[0].trim()]=t[1]}),a},getCustom:function(){var n={required:!1,data:{}};if(0<$(".template5-body").length&&"collections"==$(".nickp-event-page-location").val())var e=$(".paddL80").find(".line-item-property__field");else e=$(".line-item-property__field");return e.each(function(e,t){var a=$(t).find("*[name*='properties']");"required"!=a.attr("required")||a.val()||(n.required=!0,a.addClass("invalid")),a.val()&&(a.removeClass("invalid"),n.data[a.attr("name").slice(11)]=a.val())}),n},getSkuString:function(a){var n="";return"object"==(void 0===a?"undefined":_typeof(a))&&Object.keys(a).forEach(function(e,t){n=""==n?a[e]:"/"+a[e]}),n},getSource:function(){var e={"source=share_email":0,share_facebook:0,share_x:0,share_whatsapp:0,facebook:0,google:0,bing:0,yandex:0,snapchat:0,instagram:0,pinterest:0,email:0,outbrain:0,kwaiq:0,taboola:0,tiktok:0,yahoo:0,spider:0,baidu:0,DuckDuckGo:0,direct:0},t=document.referrer,a=window.location.href,n=navigator.userAgent;for(var i in e.direct=""==t||-1<t.indexOf("shopdd.shop")?1:0,e.outbrain=-1<a.indexOf("dicbo=")||-1<t.indexOf("outbrain.")?1:0,e.facebook=-1<a.indexOf("fbclid=")||-1<t.indexOf("facebook.")||-1<n.indexOf("FBID/phone")?1:0,e.google=-1<a.indexOf("gclid=")||-1<t.indexOf("google.")||-1<t.indexOf("com.google.android.gm")||-1<t.indexOf("com.google.android.googlequicksearchbox")?1:0,e.bing=-1<t.indexOf("bing.")||-1<n.indexOf("BingWeb")?1:0,e.yandex=-1<t.indexOf("yandex")?1:0,e.kwaiq=-1<t.indexOf("kwaiq")?1:0,e.snapchat=-1<n.indexOf("Snapchat")?1:0,e.instagram=-1<n.indexOf("Instagram")||-1<t.indexOf("instagram.")?1:0,e.pinterest=-1<n.indexOf("Pinterest")||-1<t.indexOf("pinterest.")?1:0,e.yahoo=-1<t.indexOf("yahoo.")||-1<n.indexOf("yahoo.")?1:0,e.baidu=-1<t.indexOf("baidu.")?1:0,e.DuckDuckGo=-1<t.indexOf("duckduckgo.")?1:0,e.email=-1<a.indexOf("source=email")||-1<a.indexOf("validate-email?code=")||-1<a.indexOf("com.google.android.gm")?1:0,e.share_x=-1<a.indexOf("source=share_x")?1:0,e.share_facebook=-1<a.indexOf("source=share_facebook")?1:0,e.share_whatsapp=-1<a.indexOf("source=share_whatsapp")?1:0,e.share_email=-1<a.indexOf("source=share_email")?1:0,e.taboola=-1<a.indexOf("tblci=")||-1<t.indexOf("taboola.")||-1<n.indexOf("utm_source=taboola")?1:0,e.tiktok=-1<a.indexOf("ttclid=")||-1<t.indexOf("tiktok.")||-1<n.indexOf("musical_ly")||-1<n.indexOf("ByteLocale")||-1<n.indexOf("ByteFullLocale")||-1<t.indexOf("adsintegrity.")?1:0,e.spider=-1<n.indexOf("Baiduspider")||-1<n.indexOf("360Spider")||-1<n.indexOf("Yisouspider")||-1<n.indexOf("Sogouspider")||-1<n.indexOf("Yeti")||-1<n.indexOf("Yandex")||-1<n.indexOf("Bot")||-1<n.indexOf("Crawler")||-1<n.indexOf("BingPreview")||-1<n.indexOf("bot")?1:0,e)if(1==e[i])return i;return"other"},setCookie:function(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3),document.cookie=e+"="+t+";path=/"+(null==a?"":";expires="+n.toString())},getCookie:function(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?t[2]:null},getOS:function(){var e=navigator.userAgent;return e.match(/compatible/i)||e.match(/Windows/i)?"windows":e.match(/Macintosh/i)||e.match(/MacIntel/i)?"macOS":e.match(/iphone/i)||e.match(/Ipad/i)?"ios":e.match(/android/i)?"android":e.match(/Ubuntu/i)?"Ubuntu":"other"},showOnlyApprovedOrderLoginMask:function(){$(".only-approved-order-login-mask").attr("style","display: flex"),NP_ENV.config.scrollPosition=$(window).scrollTop(),$("html, body").addClass("hidden").css("top","-"+NP_ENV.config.scrollPosition+"px")}},window.$http={host:"",urlList:["/payment/ipaylinks/pay","/buyer/paypal/create-payment","/buyer/express/match","/sail/region/get-reached-countries"],getForm:function(e,t,a){this.ajax(e,"GET",t,"html",a)},post:function(e,t,a){this.ajax(e,"POST",t,"json",a)},get:function(e,t,a){this.ajax(e,"GET",t,"json",a)},ajax:function(t,e,a,n,i){var o=this;$.ajax({url:o.host+t,type:e,data:a,dataType:n,withCredentials:!0,contentType:"application/json",success:function(e){0<$(".J-Loading").length&&($(".J-MaskLoad, .J-Loading").hide(),$("html, body").removeClass("hidden")),i&&i(e),e.code},error:function(e){0<$(".J-Loading").length&&($(".J-MaskLoad, .J-Loading").hide(),$("html, body").removeClass("hidden")),-1<o.urlList.indexOf(t)&&$plug.message.error("Sorry, can't be processed right now because of a technical issue. please try again later.")}})},upload:function(e,t,a){var n=e.size/1024/1024,i=new FormData;if(i.append("file",e),10<n)return $plug.message.error(NP_ENV.language[NP_ENV.language.lang].image_erro),!1;$.ajax({url:"/comm/upload/file",type:"POST",dataType:"json",timeout:12e4,cache:!1,data:i,processData:!1,contentType:!1,success:function(e){0==e.code?t&&t(e):$plug.message.error(e.msg)},error:function(e){$plug.message.error(JSON.stringify(e)),a&&a(e)}})}},window.stag=function(e,t,a,n){var i={event_type:e,event_name:t,params:{type:"check",additional:"",button_pos:"",user_agent:win_navigator,button_name:"",handler:$(".nickp-event-page-handler").val()||"",client_time:(new Date).getTime(),referer:$(".nickp-event-referer").val()||"",page_name:$(".nickp-event-page-location").val()||""}};$.extend(i.params,a);var o=JSON.parse($plug.getCookie("ga_utm"))||{};o=void 0!==$plug.query().utm_source||void 0!==$plug.query().utm_medium||void 0!==$plug.query().utm_campaign||void 0!==$plug.query().utm_content||void 0!==$plug.query().utm_term?$plug.query():0<Object.keys(o).length?o:$plug.query(),$plug.setCookie("ga_utm",JSON.stringify(o),7),o&&(i.utmso=o.utm_source||"",i.utmmd=o.utm_medium||"",i.utmcp=o.utm_campaign||"",i.utmct=o.utm_content||"",i.utmtm=o.utm_term||"");var r=JSON.parse(JSON.stringify(i));r.lib="PHP",window.sessionStorage.setItem("xtag_utm_json",JSON.stringify(r))},window.wpAdsLayer=function(t,e){if(window.self!=window.top)return!1;var a=e||{},n=JSON.parse($plug.getCookie("customer_id"))||"",i=JSON.parse($plug.getCookie("ga_utm"))||{},o={ul:window.location.href,ht:window.location.host,lp:"",sr:"",rl:$(".nickp-event-referer").val()||"",s:$(".J-ShopId").val(),u:$(".J-BuyerId").val(),ev:t,fu:"",p:$(".nickp-event-page-location").val()||"",ts:(new Date).getTime(),cd:JSON.stringify(a),utmso:"",utmmd:"",utmcp:"",utmct:"",utmtm:"",lib:"JS",latest_ref:sessionStorage.getItem("latest_ref")||"",latest_url:sessionStorage.getItem("latest_url")||"",customer_id:e.customer_id||n,is_login:!!n,session_id:$session.getSessionId()};function r(e,t){var a=JSON.parse(JSON.stringify(t));window.sessionStorage.setItem("wowo_utm_json",JSON.stringify(a)),"1"==global_enabled_ads_report&&$http.get("/sl.png",t)}sessionStorage.getItem("landing_page")?(o.lp=!1,o.sr=sessionStorage.getItem("advertis_ource")):(o.lp=!0,o.sr=$plug.getSource(),o.latest_ref=$(".nickp-event-referer").val()||"",o.latest_url=window.location.href,sessionStorage.setItem("advertis_ource",o.sr),sessionStorage.setItem("landing_page",(new Date).getTime()),sessionStorage.setItem("latest_ref",o.latest_ref),sessionStorage.setItem("latest_url",o.latest_url)),i=void 0!==$plug.query().utm_source||void 0!==$plug.query().utm_medium||void 0!==$plug.query().utm_campaign||void 0!==$plug.query().utm_content||void 0!==$plug.query().utm_term?$plug.query():0<Object.keys(i).length?i:$plug.query(),$plug.setCookie("ga_utm",JSON.stringify(i),7),i&&(o.utmso=i.utm_source||"",o.utmmd=i.utm_medium||"",o.utmcp=i.utm_campaign||"",o.utmct=i.utm_content||"",o.utmtm=i.utm_term||""),"orders"==$(".nickp-event-page-location").val()&&1==$(".J-IsSinglePage").val()&&(o.p="orders-single"),o.fu?r(t,o):$plug.Fingerprint2().then(function(e){o.fu=e,window.user_fingerprint=e,r(t,o)})},window.sharetag=function(e,t){var a={event_name:e,params:{source:t||""}};$api.sharetag(JSON.stringify(a))};var fb_client_id="",tiktok_ttclid="",fb_cookie_json=$plug.getCookieJSON(),page_client_json=$plug.query();page_client_json.hasOwnProperty("fbclid")?(fb_client_id=page_client_json.fbclid,window.localStorage.setItem("fb_client_id",page_client_json.fbclid)):fb_client_id=window.localStorage.getItem("fb_client_id")||"",fb_cookie_json.hasOwnProperty("_fbp")||"function"==typeof fbq&&fbq("track","PageView",{},{eventID:Math.random().toString(36).substr(2)+"PageView"+(new Date).getTime()}),page_client_json.hasOwnProperty("ttclid")?(tiktok_ttclid=page_client_json.ttclid,window.localStorage.setItem("tiktok_ttclid",page_client_json.ttclid)):tiktok_ttclid=window.localStorage.getItem("tiktok_ttclid")||"",window.conversionsApi=function(e,t,a,n){var i=$(".J-FBPixelId").val(),o=$(".J-TiktokPixelId").val(),r=""+Math.floor(parseInt(n.eventID.split(e)[1])/1e3),s={};o&&""!=o&&"PageView"!=e&&(s.tiktok={event_id:n.eventID,event_name:"Purchase"==e?"CompletePayment":e,ttclid:tiktok_ttclid,event_source_url:window.location.href,event_referrer_url:$(".nickp-event-referer").val(),external_id:$(".J-BuyerId").val(),phone_number:"",email:"",properties:a},"Purchase"==e&&(s.tiktok.email=n.email,s.tiktok.phone_number=n.phone,s.tiktok.event_id=n.orderNumber)),i&&""!=i&&(s.facebook={event_name:e,event_time:r,event_id:n.eventID,event_source_url:window.location.href,custom_data:t,pixel_id:i,fbclid:fb_client_id,user_data:window.facebook_pixel_user_data||{},fbp:fb_cookie_json._fbp||"",fbc:fb_cookie_json._fbc||"",creation_time:(new Date).getTime()},"Purchase"==e&&(s.facebook.event_id=n.orderNumber)),$api.saveconversionsApi(JSON.stringify(s))},window.$session={getSessionId:function(){var e=(new Date).getTime(),t=new Date(e).getDate(),a="",n=0,i=this.getSession();if(i){var o=i.split("_AND_");a=o[0],n=parseInt(o[1]),18e5<Math.abs(e-n)?a=this.generateSession().split("_AND_")[0]:this.generateSession(a,e),new Date(n).getDate()!=t&&(a=this.generateSession().split("_AND_")[0])}else a=this.generateSession().split("_AND_")[0];return a},getSession:function(){return window.localStorage.getItem("session_id")},generateSession:function(e,t){if(!e){var a=(new Date).getTime(),n="s.1."+a+"."+Math.random().toString(16).substr(2)+"_AND_"+a;return window.localStorage.setItem("session_id",n),n}var i=e+"_AND_"+t;window.localStorage.setItem("session_id",i)}}}),window.socialSharing={isMobileDevice:function(){return/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},windowOpen:function(e){if(console.log("windowOpen ==>> url",e),this.isMobileDevice()){var t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noopener noreferrer",document.body.appendChild(t),t.click(),setTimeout(function(){document.body.removeChild(t)},300)}else setTimeout(function(){window.open(e,"foo","width=600,height=520,top=100,right=100,noopener=yes,noreferrer=yes","_blank")},100)},share_facebook:function(e){var t="https://www.facebook.com/sharer.php?u="+e;this.windowOpen(t)},like_on_facebook:function(e){var t="https://www.facebook.com/"+e;this.windowOpen(t)},follow_instagram:function(e){var t="https://www.instagram.com/"+e+"/";this.windowOpen(t)},share_x:function(e,t){var a="https://x.com/intent/tweet?text="+e+t;this.windowOpen(a)},follow_x:function(e){var t="https://x.com/intent/follow?screen_name="+e;this.windowOpen(t)},follow_tiktok:function(e){var t="https://www.tiktok.com/@"+e;this.windowOpen(t)},share_whatsapp:function(e,t){var a="https://wa.me/?text="+e+t;this.windowOpen(a)},share_email:function(e,t){var a=document.createElement("a");a.href="mailto:?subject="+e+"&body="+t,a.style.opacity="0",document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a)},300)},copyToClipboard:function(e){var t=document.createElement("textarea");t.style.opacity="0",t.zIndex="-10",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i,e){var t=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"login",value:function(e){"function"==typeof gtag&&gtag("event","login",{method:"Google"})}},{key:"signup",value:function(e){"function"==typeof gtag&&gtag("event","sign_up",{method:"Google"})}},{key:"pageView",value:function(){var e=window.location.href,t=i(".nickp-event-page-location").val();"function"==typeof wpAdsLayer&&wpAdsLayer("PageView",{}),"function"==typeof gtag&&gtag("event",{page_location:e,page_path:window.location.pathname,page_title:i("title").text()}),"collections"==t?"function"==typeof stag&&stag("page_load","page_view",{page_name:t,handler:i(".nickp-event-page-handler").val()}):"function"==typeof stag&&stag("page_load","page_view",{page_name:t})}},{key:"search",value:function(e){var t=$plug.query().keyword;"function"==typeof wpAdsLayer&&wpAdsLayer("search",{search_string:t})}},{key:"viewItem",value:function(e){var t=[];t.push(i(".product-id").val()),window.dotq=window.dotq||[],window.dotq.push({projectId:"10000",properties:{pixelId:"10101331",qstrings:{et:"custom",ea:"ViewProduct",product_id:i(".product-id").val()}}}),"function"==typeof wpAdsLayer&&wpAdsLayer("ViewContent",{content_type:"product",content_name:i(".J-product-title").val(),content_ids:t})}},{key:"viewItemList",value:function(e){}},{key:"customEvent",value:function(e,t){"function"==typeof wpAdsLayer&&wpAdsLayer(e,t)}},{key:"addToCart",value:function(e){if(!e)return"function"==typeof fbq&&fbq("track","AddToCart"),"function"==typeof snaptr&&snaptr("track","ADD_CART"),"function"==typeof gtag&&gtag("event","add_to_cart"),"function"==typeof pintrk&&pintrk("track","addtocart"),"function"==typeof wpAdsLayer&&wpAdsLayer("AddToCart",{}),"object"==_typeof(window.uetq)&&window.uetq.push("event","add_to_cart"),"function"==typeof fbq&&fbq("track","InitiateCheckout"),"function"==typeof snaptr&&snaptr("track","START_CHECKOUT"),"function"==typeof gtag&&gtag("event","begin_checkout"),"function"==typeof gtag&&gtag("event","conversion",{send_to:i(".J-GoogleAdsCheckout").val()}),"function"==typeof wpAdsLayer&&wpAdsLayer("InitiateCheckout",{}),"object"==("undefined"==typeof kwaiq?"undefined":_typeof(kwaiq))&&kwaiq.instance(window.kwai_pixel_id).track("addToCart"),window._tfa=window._tfa||[],window._tfa.push({notify:"event",name:"start_checkout",id:i(".J-TaboolaPixelId").val()}),"function"==typeof obApi&&obApi("track","Checkout"),!1;var t={content_type:"product",content_ids:[e.sku_id],value:e.value,content_name:e.content_name,currency:e.currency,content_category:""},a={contents:[{price:e.value,content_type:"product",content_id:i(".product-id").val(),quantity:e.num_items,content_name:e.content_name}],currency:e.currency,value:e.value*e.num_items},n={eventID:Math.random().toString(36).substr(2)+"AddToCart"+(new Date).getTime()};"function"==typeof wpAdsLayer&&wpAdsLayer("AddToCart",{content_type:"product",content_ids:e.content_ids,value:e.value,num_items:e.num_items,content_name:e.content_name,currency:e.currency,content_category:""}),"object"==("undefined"==typeof ttq?"undefined":_typeof(ttq))&&ttq.track("AddToCart",{content_type:"product",content_id:i(".product-id").val(),quantity:e.num_items,content_name:e.content_name,currency:e.currency,value:e.value},n),"all"!=facebook_tracking_way&&"browser"!=facebook_tracking_way||"function"==typeof fbq&&fbq("track","AddToCart",t,n),"all"!=facebook_tracking_way&&"capi"!=facebook_tracking_way||"function"==typeof conversionsApi&&conversionsApi("AddToCart",t,a,n),"function"==typeof stag&&stag("page_click","add_to_cart",{handler:e.handler}),"function"==typeof snaptr&&snaptr("track","ADD_CART",{price:e.value||"",currency:e.currency||"",item_ids:e.content_ids||"",item_category:"",number_items:e.num_items||""}),"function"==typeof pintrk&&pintrk("track","addtocart",{value:e.value||"",order_quantity:e.num_items||"",currency:e.currency||""}),"object"==_typeof(window.uetq)&&window.uetq.push("event","add_to_cart",{}),"function"==typeof gtag&&gtag("event","add_to_cart",{currency:e.currency||"",value:e.num_items*e.value,items:[{id:e.sku_id||"",name:e.content_name||"",variant:e.item_variant||"",quantity:e.num_items||"",price:e.value||""}]}),"object"==("undefined"==typeof kwaiq?"undefined":_typeof(kwaiq))&&kwaiq.instance(window.kwai_pixel_id).track("addToCart",{content_id:i(".product-id").val(),quantity:e.num_items,price:e.value||"",value:e.value?Number(e.value)*Number(e.num_items):"",currency:e.currency}),"function"==typeof gtag&&gtag("event","add_to_cart",{value:e.value||"",items:[{id:e.sku_id||"",google_business_vertical:"retail"}]}),window.dotq=window.dotq||[],window.dotq.push({projectId:"10000",properties:{pixelId:"10101331",qstrings:{et:"custom",ea:"AddToCart",gv:e.value||"",product_id:e.content_ids&&e.content_ids[0]||""}}}),"function"==typeof gtag&&gtag("event","conversion",{send_to:i(".J-GoogleAdsCart").val(),value:e.value||"",currency:e.currency||""}),0<taboola_pixel_id_array.length&&(window._tfa=window._tfa||[],taboola_pixel_id_array.map(function(e){window._tfa.push({notify:"event",name:"add_to_cart",id:e})})),"function"==typeof obApi&&obApi("track","Add to cart"),"function"==typeof rdt&&rdt("track","AddToCart",{currency:e.currency,itemCount:e.num_items,value:e.value,products:[{id:e.content_ids&&e.content_ids[0]||"",name:e.content_name,category:""}]})}},{key:"beginCheckout",value:function(e){var t={content_ids:e.content_ids||"",content_type:"product",currency:i(".J-currency-code").data("currency"),value:e.value||"",num_items:e.num_items||""},a={eventID:Math.random().toString(36).substr(2)+"InitiateCheckout"+(new Date).getTime()};"object"==("undefined"==typeof ttq?"undefined":_typeof(ttq))&&ttq.track("InitiateCheckout"),"all"!=facebook_tracking_way&&"browser"!=facebook_tracking_way||"function"==typeof fbq&&fbq("track","InitiateCheckout",t,a),"all"!=facebook_tracking_way&&"capi"!=facebook_tracking_way||"function"==typeof conversionsApi&&conversionsApi("InitiateCheckout",t,{},a),"function"==typeof wpAdsLayer&&wpAdsLayer("InitiateCheckout",{content_ids:e.content_ids||"",content_type:"product",currency:i(".J-currency-code").data("currency"),value:e.value||"",num_items:e.num_items||""}),"function"==typeof stag&&stag("page_load","checkout",{page_name:i(".nickp-event-page-location").val()}),"function"==typeof snaptr&&snaptr("track","START_CHECKOUT",{price:e.value||"",currency:e.currency||"",item_ids:e.content_ids||"",item_category:"",number_items:e.num_items||""}),"function"==typeof gtag&&gtag("event","begin_checkout",{value:e.value||"",items:e.items.google_tag||""}),"function"==typeof gtag&&gtag("event","begin_checkout",{currency:i(".J-currency-code").val(),value:e.value||"",coupon:e.coupon||"",items:e.ads_items||""}),"function"==typeof gtag&&gtag("event","conversion",{send_to:i(".J-GoogleAdsCheckout").val(),value:e.value||"",currency:e.currency||""}),"object"==("undefined"==typeof kwaiq?"undefined":_typeof(kwaiq))&&kwaiq.instance(window.kwai_pixel_id).track("initiatedCheckout"),0<taboola_pixel_id_array.length&&(window._tfa=window._tfa||[],taboola_pixel_id_array.map(function(e){window._tfa.push({notify:"event",name:"start_checkout",id:e})})),"function"==typeof obApi&&obApi("track","checkout")}},{key:"addPaymentInfo",value:function(e){var t={content_ids:e.items.facebook_tag||[],currency:e.currency||"",value:e.value||""},a={eventID:Math.random().toString(36).substr(2)+"AddPaymentInfo"+(new Date).getTime()};"function"==typeof wpAdsLayer&&wpAdsLayer("SubscribedButtonClick",{buttonText:"Complete order"}),"function"==typeof wpAdsLayer&&wpAdsLayer("AddPaymentInfo",{currency:e.currency||"",value:e.value||""}),"function"==typeof stag&&stag("page_click","add_payment_info",t),"function"==typeof gtag&&gtag("event","add_payment_info",{items:e.items.google_tag||""}),"function"==typeof snaptr&&snaptr("track","ADD_BILLING",{price:e.value,currency:e.currency}),"object"==("undefined"==typeof ttq?"undefined":_typeof(ttq))&&ttq.track("AddPaymentInfo",{},a),"all"!=facebook_tracking_way&&"browser"!=facebook_tracking_way||"function"==typeof fbq&&fbq("track","AddPaymentInfo",t,a),"all"!=facebook_tracking_way&&"capi"!=facebook_tracking_way||"function"==typeof conversionsApi&&conversionsApi("AddPaymentInfo",t,{},a)}},{key:"purchase",value:function(e){}}]),e}();e.$tracking=new t}(jQuery,window),function(e,t){var a={aliOssConfig:{region:"oss-cn-shenzhen",accessKeyId:"",accessKeySecret:"",stsToken:"",bucket:"hn-img-mall-1"},updateOssConfig:function(e){this.aliOssConfig.region=e.region,this.aliOssConfig.bucket=e.bucket,this.aliOssConfig.stsToken=e.stsToken,this.aliOssConfig.accessKeyId=e.accessKeyId,this.aliOssConfig.accessKeySecret=e.accessKeySecret},get_filemd5sum:function(t){return new Promise(function(a,e){var n=t,i=void 0,o=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,r=8097152,s=Math.ceil(n.size/r),c=0,l=new SparkMD5.ArrayBuffer,d=new FileReader;function u(){var e=c*r,t=e+r>=n.size?n.size:e+r;d.readAsArrayBuffer(o.call(n,e,t))}d.onload=function(e){l.append(e.target.result),c++;var t=Math.floor(c/s*100);console.log(n.name+"上传"+t+"%"),c<s?u():(i=l.end(),a(i),console.log(n.name+"的MD5值是："+i))},d.onerror=function(){e(!1),console.warn("oops, something went wrong.")},u()})},queryExsit:function(e){var n=this;return new Promise(function(t,a){$api.queryExsit({md5:e}).then(function(e){0===e.code?(n.updateOssConfig(e.data.config),1===e.data.is_uploaded?(e.data.file.upload="success",t(e.data.file)):t(!1)):t(!1)}).catch(function(e){a(e)})})},uploadToOss:function(r,s){var c=this;return new Promise(function(t,a){var n="",e=new OSS(c.aliOssConfig),i=r.name.split(".")[r.name.split(".").length-1],o=SparkMD5.hash((new Date).getTime()+r.name)+"."+i;try{e.multipartUpload("diy-uploader/"+o,r,{}).catch(function(e){console.error(e.toString()),a(!1)}).then(function(e){e&&e.res&&200===e.res.status&&e.res.requestUrls.length?(console.log("上传成功",e.name,e),e.res.requestUrls[0]&&$api.getFileId({md5:s,file_key:"diy-uploader/"+o}).then(function(e){0===e.code&&(e.data.upload="success",n=e.data,t(n))})):t(!1)})}catch(e){console.log("上传失败",e),a(e)}})},imgUpload:function(n){var i=this,o="";return new Promise(function(t,a){i.get_filemd5sum(n).then(function(e){return o=e,i.queryExsit(o)}).then(function(e){if(!e)return i.uploadToOss(n,o);t(e)}).then(function(e){t(e)}).catch(function(e){a(e)})})}};window.$ossUpload=a}(jQuery),function(l,s){l.isLazyLoad=!0,l.lazyLoad=function(e){var t;function c(e){var t=null;if(l.isLazyLoad=!1,e.dataset)t=e.dataset;else{for(var a,n=e.attributes,i={},o=0;o<n.length;o++)(a=n[o].name.match(/^data-(.+)/))&&(i[a[1].replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})]=n[o].value);t=i}if(!t.hasOwnProperty("widths"))return function(){try{return 0===s.createElement("canvas").toDataURL("image/webp",.5).indexOf("data:image/webp")}catch(e){return!1}}()?t.original+"?x-oss-process=image/interlace,1/format,webp":t.original;if(t.hasOwnProperty("widths")){var r={widths:JSON.parse(t.widths),original:t.original.split(",")};return r.widths.length<=0?r.original[0]:-1<r.widths.indexOf(NP_ENV.config.availWidth)?r.original[r.widths.indexOf(NP_ENV.config.availWidth)]:r.original[r.original.length-1]}}function a(o){for(var r=l.screen.height,s=0;s<o.length;s++)!function(){var e=o[s],t=c(e);if(t&&!(-1<e.className.indexOf("lazy-load-show"))){var a=e.getBoundingClientRect(),n=a.top+a.height+r;if(a.top<=r&&0<n){var i=new Image;i.src=t,i.onload=function(){e.className+=" lazy-load-show","IMG"==e.tagName&&(e.src=t),"DIV"==e.tagName&&(e.style.backgroundImage="url("+t+")")}}}}()}"window"in(t=self)&&"document"in t&&"TextRectangle"in t&&!("width"in t.TextRectangle.prototype)&&Object.defineProperties(t.TextRectangle.prototype,{width:{get:function(){return this.right-this.left}},height:{get:function(){return this.bottom-this.top}}});var n=e?s.getElementsByClassName(e):s.getElementsByTagName("img");"undefined"!=typeof IntersectionObserver?function(e){for(var t={root:null,rootMargin:"0px",threshold:[0]},a=0;a<e.length;a++)new IntersectionObserver(function(e,i){e.forEach(function(e){if(e.isIntersecting){var t=new Image,a=e.target,n=c(a);if(!n||-1<a.className.indexOf("lazy-load-show"))return!1;t.src=n,t.onload=function(){a.classList.add("lazy-load-show"),"IMG"==a.tagName&&(a.src=n),"DIV"==a.tagName&&(a.style.backgroundImage="url("+n+")"),i.disconnect()}}})},t).observe(e[a])}(n):(a(n),l.onscroll=function(){a(n)})}}(window,document),lazyLoad("J-LazyLoad"),window.onload=function(){lazyLoad("J-LazyLoad")},setTimeout(function(){window.isLazyLoad&&lazyLoad("J-LazyLoad")},500);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i,e){var t=function(){function e(){_classCallCheck(this,e),this.paying=!1,this.Airwallex=null,this.domElement=null,this.orderNumber=0,this.config={env:"",origin:window.location.origin,locale:"en",fonts:[{src:"https://checkout.airwallex.com/fonts/CircularXXWeb/CircularXXWeb-Regular.woff2",family:"AxLLCircular",weight:400}]},this.paymentConfig={currency:"",intent_id:"",client_secret:""}}return _createClass(e,[{key:"init",value:function(e){var n=this;this.config.env=0==i(".J-AirwallexIsSandbox").val()?"prod":"demo",Airwallex.init(this.config);var t=Airwallex.createElement("card"),a=t.mount("card");this.Airwallex=t,this.domElement=a,9==e.credit_card_type&&"card"==e.pay_way&&i(".J-PaymentMethod").find(".J-CreateOrder").addClass("np-ui-disabled").attr("disabled","disabled"),a.addEventListener("onBlur",function(e){var t=e.detail.error,a=t&&t.hasOwnProperty("message")?t:null;a?(window.parent.postMessage({event:"payment_failed",msg:a},"*"),n.paying=!0,i(".airwallex-box").find(".payoneer-error-msg").text(a.message).removeClass("display-none"),i(".J-PaymentMethod").find(".J-CreateOrder").addClass("np-ui-disabled").attr("disabled","disabled")):(n.paying=!1,i(".airwallex-box").find(".payoneer-error-msg").text("").addClass("display-none"),i(".J-PaymentMethod").find(".J-CreateOrder").removeClass("np-ui-disabled").removeAttr("disabled"))}),a.addEventListener("onFocus",function(e){i(".airwallex-box").find(".payoneer-error-msg").text("").addClass("display-none")})}},{key:"getConfigAttr",value:function(e){return this[e]}},{key:"initConfig",value:function(e,t){"orderNo"==e&&(this.orderNumber=t)}},{key:"confirmPaymentIntent",value:function(e){var t=this;$api.airwallexPayConfig(JSON.stringify(e)).then(function(e){0==e.code&&Airwallex.confirmPaymentIntent({intent_id:e.data.id,element:t.Airwallex,currency:e.data.currency,client_secret:e.data.client_secret,payment_method:{billing:e.data.billing}}).then(function(e){t.monitor({id:e.id,order_number:e.merchant_order_id})}).catch(function(e){console.log("There was an error",e),i(".airwallex-box").find(".payoneer-error-msg").text(e.message).removeClass("display-none")})})}},{key:"monitor",value:function(e){$api.airwallexSuccess(JSON.stringify(e)).then(function(e){0==e.code?i(parent.document).find("#checkout-ifr")[0]?parent.location.href=e.data.url:window.location.href=e.data.url:$plug.closeLoading()})}}]),e}();e.$airwallexPayment=new t}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(y,e){var t=function(){function e(){_classCallCheck(this,e),this.ab=null,this.isToken=!1,this.orderNumber=0,this.useSavedCard=!1,this.asiabillInner=null,this.paymentMethodObj={billingDetail:{address:{city:"sz",country:"CN",line1:"line",line2:"",postalCode:"518000",state:"state"},email:"lcq@gmail.com",firstName:"CL",lastName:"BRW1",phone:"13249432555"},card:{cardNo:"",cardExpireMonth:"",cardExpireYear:"",cardSecurityCode:"",issuingBank:""},customerId:"",signInfo:""},this.confirmChargeObj={callbackUrl:"https://"+window.location.host+"/payment/asiabill-inner/notify",customerId:this.isSaveCard?this.selectedPaymentMethodObj.customerId:"",customerPaymentMethodId:this.customerPaymentMethodId,gatewayNo:"",goodsDetail:[{goodstitle:"",goodscount:"",goodsprice:""},{goodstitle:"",goodscount:"",goodsprice:""}],isMobile:"string",merNo:"",orderAmount:"",orderCurrency:"",orderNo:"",platform:"xshoppy",remark:"",shipping:{address:{city:"",country:"",line1:"",line2:"",postalCode:"",state:""},email:"",firstName:"",lastName:"",phone:""},signInfo:"",tradeType:"string",webSite:"string"},this.customerPaymentMethodId="",this.selectedPaymentMethodObj={}}return _createClass(e,[{key:"initConfig",value:function(e,t,a){var n=[];"orderNo"==e&&(this.orderNumber=a,this.confirmChargeObj.orderNo=a,this.paymentMethodObj.billingDetail.email=t.billing_email,this.paymentMethodObj.billingDetail.lastName=t.billing_last_name,this.paymentMethodObj.billingDetail.firstName=t.billing_first_name,this.paymentMethodObj.billingDetail.phone=t.billing_phone,this.paymentMethodObj.billingDetail.address.city=t.billing_city,this.paymentMethodObj.billingDetail.address.country="Hongkong"==t.billing_contry_code?"HK":t.shipping_contry_code,this.paymentMethodObj.billingDetail.address.line1=t.billing_address,this.paymentMethodObj.billingDetail.address.line2=t.billing_other_address,this.paymentMethodObj.billingDetail.address.postalCode=t.billing_zip_code,this.paymentMethodObj.billingDetail.address.state=t.billing_province||"other",this.confirmChargeObj.shipping.email=t.shipping_email,this.confirmChargeObj.shipping.lastName=t.shipping_last_name,this.confirmChargeObj.shipping.firstName=t.shipping_first_name,this.confirmChargeObj.shipping.phone=t.shipping_phone,this.confirmChargeObj.shipping.address.city=t.shipping_city,this.confirmChargeObj.shipping.address.country="Hongkong"==t.shipping_contry_code?"HK":t.shipping_contry_code,this.confirmChargeObj.shipping.address.line1=t.shipping_address,this.confirmChargeObj.shipping.address.line2=t.shipping_other_address,this.confirmChargeObj.shipping.address.postalCode=t.shipping_zip_code,this.confirmChargeObj.shipping.address.state=t.shipping_province),"goodsDetail"==e&&(0<t.cart.list.length&&(n=t.cart.list.map(function(e){return{goodstitle:e.product_title,goodscount:e.quantity,goodsprice:e.price}})),this.confirmChargeObj.goodsDetail=n,this.confirmChargeObj.remark=t.cart.remark,this.confirmChargeObj.orderAmount=t.total.total,this.confirmChargeObj.orderCurrency=y(".J-currency-code").val()),"orderAmount"==e&&(this.confirmChargeObj.orderAmount=t)}},{key:"getAsiabillToken",value:function(t){var a=this;this.isToken?t(this.asiabillInner):$api.getAsiabillToken({}).then(function(e){t&&t(e.data),a.asiabillInner=e.data,a.confirmChargeObj.merNo=a.asiabillInner.merNo,a.paymentMethodObj.signInfo=a.asiabillInner.signInfo,a.confirmChargeObj.gatewayNo=a.asiabillInner.gatewayNo,a.confirmChargeObj.signInfo=a.asiabillInner.signInfo}),window.addEventListener("message",function(e){"validate"==e.data.type&&""!=e.data.data.errorMsg&&"confirmPaymentMethod"==e.data.data.lastEvent&&($plug.closeLoading(),y(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1))})}},{key:"addLoading",value:function(){var e=document.getElementById("ab_loaderCeil");if(!e){(e=document.createElement("div")).id="ab_loaderCeil";var t=document.getElementById(ele);t.style.position="relative",t&&t.appendChild(e);var a=document.createElement("div");a.id="ab_loader",document.getElementById("ab_loaderCeil").appendChild(a)}}},{key:"removeLoading",value:function(){var e=document.getElementById("ab_loaderCeil");if(e){var t=e.parentElement;t&&t.removeChild(e)}}},{key:"asiabillEmbedded",value:function(){var u=this,p=(new Date).getTime(),t={formId:"payment-form",frameId:"AsiabillPayIframe",mode:1==y(".J-AsiabillIsSandbox").val()?"test":"pro",customerId:"",needCardList:!0,needCardLogo:!0,autoValidate:!0,layout:{pageMode:"block",style:{frameMaxHeight:"98",input:{Color:"#32325d",ContainerBg:"#ffffff",ContainerBorder:"0",ContainerSh:"none",FontFamily:"Arial",FontSize:"16",FontWeight:"400"}}}};this.getAsiabillToken(function(e){u.ab=AsiabillPay(e.sessionToken),u.ab.elementInit("payment_steps",t).then(function(e){var s=e.data.paymentMethodList,t=(new Date).getTime(),a={start:p,end:t,time:t-p,success:1};if($api.asiabillPayLogger(JSON.stringify(a)),0<s.length){var n=document.getElementsByClassName("Card_radio");frame=document.getElementById("PrivateFrame");var i=!0,o=!1,r=void 0;try{for(var c,l=function(){var r=c.value;r.addEventListener("click",function(){if("Card_radio_other"!=r.id){var e=!0,t=!(frame.style.display="none"),a=void 0;try{for(var n,i=s[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;o.customerPaymentMethodId===r.getAttribute("data-id")&&(u.selectedPaymentMethodObj=o)}}catch(e){t=!0,a=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw a}}u.useSavedCard=!0,u.paymentMethodObj.customerId=u.selectedPaymentMethodObj.customerId,u.confirmChargeObj.customerId=u.selectedPaymentMethodObj.customerId}else frame.style.display="inline-block",u.useSavedCard=!1})},d=n[Symbol.iterator]();!(i=(c=d.next()).done);i=!0)l()}catch(e){o=!0,r=e}finally{try{!i&&d.return&&d.return()}finally{if(o)throw r}}}u.removeLoading(),y(".J-CreateOrder").removeClass("np-ui-btn-disabled")}).catch(function(e){u.removeLoading();var t={start:p,end:end_temp,time:end_temp-p,success:0};$api.asiabillPayLogger(JSON.stringify(t)),y(".J-CreateOrder").removeClass("np-ui-btn-disabled")})})}},{key:"confirmPaymentMethodOrder",value:function(){var t=this;this.useSavedCard?(addLoading("checkout-left"),setTimeout(function(){t.asiabillInnerCapture()},300)):this.isSaveCard?localStorage.getItem("customerId")?(customerId=localStorage.getItem("customerId"),paymentMethodObj.customerId=customerId,this.confirmPaymentM()):createHttpRequest(customerUrl,"post","json",{description:"123123123123",email:"lcq@gmail.com",firstName:"CL",lastName:"BRW1",phone:"13249432555"},function(e){"0"===e.code&&(customerId=e.data.customerId,localStorage.setItem("customerId",customerId),paymentMethodObj.customerId=customerId,t.confirmPaymentM())},{sessionToken:token,async:!1}):this.confirmPaymentM()}},{key:"confirmPaymentM",value:function(){var a=this;$plug.loading(NP_ENV.language[NP_ENV.language.lang].payment_in_progress),this.ab.confirmPaymentMethod({apikey:this.asiabillInner.sessionToken,trnxDetail:this.paymentMethodObj}).then(function(e){var t=e;"0"===t.data.code&&(a.customerPaymentMethodId=t.data.data.customerPaymentMethodId,a.confirmChargeObj.customerPaymentMethodId=t.data.data.customerPaymentMethodId,a.asiabillInnerCapture())})}},{key:"asiabillInnerCapture",value:function(){var e={order_number:this.orderNumber,token:this.asiabillInner.sessionToken,payment_id:this.customerPaymentMethodId};$api.asiabillInnerCapture(JSON.stringify(e)).then(function(e){0==e.code?y(parent.document).find("#checkout-ifr")[0]?parent.location.href=e.data.url:window.location.href=e.data.url:$plug.closeLoading()})}}]),e}();e.$asiabillPayment=new t}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(o,e){var t=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createPayment",value:function(e){var t=this;$plug.loading(NP_ENV.language[NP_ENV.language.lang].payment_in_progress),fetch(e).then(function(e){return e.json()}).then(function(e){console.log(e),"1"!=e.type?t.showFullScreenModal(e.url):window.location.href=e.url}).catch(function(e){console.error("Error:",e),t.cloasLoading()})}},{key:"cloasLoading",value:function(){o(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1),0<o(".J-Loading").length&&(o(".J-MaskLoad, .J-Loading").hide(),o("html, body").removeClass("hidden"))}},{key:"showFullScreenModal",value:function(e){var t=this,a=o('<div class="cardgipay-full-screen-modal"></div>'),n=o('<iframe name="woo-cardgipay" src="'+e+'" sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-top-navigation allow-payment-request allow-fullscreen allow-popups-to-escape-sandbox  allow-modals" frameborder="0"></iframe>');a.append(n);var i=o('<div class="nav-model-mask-close iconfont icon-close cardgipay-close-button"></div>');a.append(i),$plug.loading(NP_ENV.language[NP_ENV.language.lang].payment_in_progress),n.on("load",function(){setTimeout(function(){a.show(),t.cloasLoading()},300)}),o("body").append(a),a.hide(),a.css({position:"fixed",top:0,left:0,width:"100%",height:"100%","background-color":"#FFF","z-index":9999,display:"none","justify-content":"center","align-items":"center"}),a.find("iframe").css({width:"100%",height:"100%"}),i.css({position:"absolute",top:"10px",right:"20px","font-size":"26px",color:"#333",cursor:"pointer","z-index":1e4}),i.on("click",function(){a.remove(),t.cloasLoading()})}}]),e}();e.$cardGiPay=new t}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i,t){var e=function(){function e(){_classCallCheck(this,e),this.key="",this.dlocalInstance=null,this.fieldsExample2=null,this.panField=null,this.isPanEmpty=!0,this.panHasError=!1,this.expirationField=null,this.isExpirationEmpty=!0,this.expirationHasError=!1,this.cvvField=null,this.isCvvEmpty=!0,this.cvvHasError=!1,this.isNameEmpty=!0,this.nameHasError=!1}return _createClass(e,[{key:"setConfig",value:function(e,t){this[e]=t}},{key:"init",value:function(){this.dlocalInstance=t.dlocal(this.key),this.fieldsExample2=this.dlocalInstance.fields({fonts:[{cssSrc:"https://rsms.me/inter/inter-ui.css"}],locale:"en",country:"BR"}),this.initPanField(),this.initCvvField(),this.initExpirationField(),this.event()}},{key:"initPanField",value:function(){this.panField=this.fieldsExample2.create("pan",{style:{base:{width:"100%",fontSize:"15px",fontFamily:"'Open Sans', sans-serif",lineHeight:"30px",fontSmoothing:"antialiased",fontWeight:"500",iconColor:"#fff","::placeholder":{color:"#fff"}},focus:{iconColor:"#adbfd3","::placeholder":{color:"#adbfd3"}}},placeholder:"4111 1111 1111 1111",hideIcon:!0})}},{key:"initExpirationField",value:function(){var e=new Date,t=e.getMonth()+1,a=t<=9?"0"+t:t.toString(),n=(e.getFullYear()+2).toString().substring(2);this.expirationField=this.fieldsExample2.create("expiration",{style:{base:{width:"100%",fontSize:"15px",fontFamily:"'Open Sans', sans-serif",lineHeight:"30px",fontSmoothing:"antialiased",fontWeight:"500","::placeholder":{color:"white"}},focus:{"::placeholder":{color:"#adbfd3"}}},placeholder:a+"/"+n})}},{key:"initCvvField",value:function(){this.cvvField=this.fieldsExample2.create("cvv",{style:{base:{width:"100%",fontSize:"15px",fontFamily:"'Open Sans', sans-serif",lineHeight:"30px",fontSmoothing:"antialiased",fontWeight:"500","::placeholder":{color:"white"}},focus:{"::placeholder":{color:"#adbfd3"}}},placeholder:"123"})}},{key:"clickPan",value:function(){this.panField.focus()}},{key:"clickExpiration",value:function(){this.expirationField.focus()}},{key:"clickCVV",value:function(){this.cvvField.focus()}},{key:"event",value:function(){var a=this;this.panField.mount(document.getElementById("containerPan")),this.expirationField.mount(document.getElementById("containerExpiration")),this.cvvField.mount(document.getElementById("containerCVV")),i(document).on("click",".pan-field-input, .pan-field-label",function(){a.clickPan()}),i(document).on("click",".expiration-field-input, .expiration-field-label",function(){a.clickExpiration()}),i(document).on("click",".cvv-field-input, .cvv-field-label",function(){a.clickCVV()}),this.panField.on("focus",function(){document.getElementById("fieldPanContainer").classList.add("put-away")}),this.expirationField.on("focus",function(){document.getElementById("fieldExpirationContainer").classList.add("put-away")}),this.cvvField.on("focus",function(){document.getElementById("fieldCVVContainer").classList.add("put-away")}),this.panField.on("blur",function(e){if(a.isPanEmpty=e.empty,e.error||a.isPanEmpty){a.panHasError=!0,document.getElementById("fieldPanContainer").classList.add("hasError");var t=e.error?e.error.message:"Enter your credit card number.";document.getElementById("panErrorMsg").innerHTML=t}else a.panHasError=!1,document.getElementById("fieldPanContainer").classList.remove("hasError");a.isPanEmpty&&document.getElementById("fieldPanContainer").classList.remove("put-away")}),this.panField.on("change",function(e){if(this.isPanEmpty=e.empty,e.error){this.panHasError=!0,document.getElementById("fieldPanContainer").classList.add("hasError");var t=e.error?e.error.message:"Enter your credit card number.";document.getElementById("panErrorMsg").innerHTML=t}else this.panHasError=!1,document.getElementById("fieldPanContainer").classList.remove("hasError")}),this.panField.on("brand",function(e){switch(e.brand){case"visa":i(".pan-field-icon").find("img").attr("src",i(".static-path").data("static-path")+"img/payment/visa1.svg");break;case"mastercard":i(".pan-field-icon").find("img").attr("src",i(".static-path").data("static-path")+"img/payment/mastercard.svg");break;case"american-express":i(".pan-field-icon").find("img").attr("src",i(".static-path").data("static-path")+"img/payment/AmericanExpress.svg");break;case"discover":i(".pan-field-icon").find("img").attr("src",i(".static-path").data("static-path")+"img/payment/discover.svg");break;default:i(".pan-field-icon").find("img").attr("src",i(".static-path").data("static-path")+"img/card-default.png")}}),this.expirationField.on("blur",function(e){if(a.isExpirationEmpty=e.empty,e.error||a.isExpirationEmpty){a.expirationHasError=!0,document.getElementById("fieldExpirationContainer").classList.add("hasError");var t=e.error?e.error.message:"Enter your credit card expiration.";document.getElementById("expirationErrorMsg").innerHTML=t}else a.expirationHasError=!1,document.getElementById("fieldExpirationContainer").classList.remove("hasError");a.isExpirationEmpty&&document.getElementById("fieldExpirationContainer").classList.remove("put-away")}),this.expirationField.on("change",function(e){if(a.isExpirationEmpty=e.empty,e.error){a.expirationHasError=!0,document.getElementById("fieldExpirationContainer").classList.add("hasError");var t=e.error?e.error.message:"Enter your credit card expiration.";document.getElementById("expirationErrorMsg").innerHTML=t}else a.expirationHasError=!1,document.getElementById("fieldExpirationContainer").classList.remove("hasError")}),this.cvvField.on("blur",function(e){if(a.isCvvEmpty=e.empty,e.error||a.isCvvEmpty){a.cvvHasError=!0,document.getElementById("fieldCVVContainer").classList.add("hasError");var t=e.error?e.error.message:"Enter your credit card CVV.";document.getElementById("cvvErrorMsg").innerHTML=t}else a.cvvHasError=!1,document.getElementById("fieldCVVContainer").classList.remove("hasError");a.isCvvEmpty&&document.getElementById("fieldCVVContainer").classList.remove("put-away")}),this.cvvField.on("change",function(e){if(a.isCvvEmpty=e.empty,e.error){a.cvvHasError=!0,document.getElementById("fieldCVVContainer").classList.add("hasError");var t=e.error.message?e.error.message:"Enter your credit card CVV.";document.getElementById("cvvErrorMsg").innerHTML=t}else a.cvvHasError=!1,document.getElementById("fieldCVVContainer").classList.remove("hasError")}),i(document).on("focus",".name-field-input",function(){i(".name-field").addClass("put-away")}),i(document).on("click",".name-field-label",function(){i(".name-field-input").focus()});var t=i(".name-field-input").val().trim();i(document).on("keyup, change",".name-field-input",function(){var e=i(".name-field-input").val().trim();e?(a.isNameEmpty=!1,i(".name-field").removeClass("hasError")):(a.isNameEmpty=!0,i(".name-field").addClass("hasError")),i(".name-field").removeClass("autofilled"),e!==t&&""!==e&&i(".name-field").addClass("autofilled"),t=e}),i(document).on("blur",".name-field-input",function(){a.isNameEmpty=!0,i(".name-field-input").val().trim()?(a.isNameEmpty=!1,i(".name-field").removeClass("hasError")):(i(".name-field").addClass("hasError"),i(".name-field").removeClass("put-away"))}),this.panField.on("autofilled",function(e){e.autofilled?document.getElementById("fieldPanContainer").classList.add("autofilled"):document.getElementById("fieldPanContainer").classList.remove("autofilled")}),this.expirationField.on("autofilled",function(e){e.autofilled?document.getElementById("fieldExpirationContainer").classList.add("autofilled"):document.getElementById("fieldExpirationContainer").classList.remove("autofilled")}),this.cvvField.on("autofilled",function(e){e.autofilled?document.getElementById("fieldCVVContainer").classList.add("autofilled"):document.getElementById("fieldCVVContainer").classList.remove("autofilled")})}},{key:"isRequired",value:function(){var e=!this.isNameEmpty,t=!this.isPanEmpty&&!this.panHasError,a=!this.isExpirationEmpty&&!this.expirationHasError,n=!this.isCvvEmpty&&!this.cvvHasError;return t||i(".pan-field").addClass("hasError"),a||i(".expiration-field").addClass("hasError"),n||i(".cvv-field").addClass("hasError"),e||i(".name-field").addClass("hasError"),!!(t&&a&&n&&e)}},{key:"onPaymentCompleted",value:function(t){var e=i(".name-field-input").val();this.dlocalInstance.createToken(this.panField,{name:e}).then(function(e){t.token=e.token,t.full_name=i(".name-field-input").val().trim(),console.log("onPaymentCompleted ==>> params",t,e.token),$api.dLocalInnerPay(JSON.stringify(t)).then(function(e){0==e.code?i(parent.document).find("#checkout-ifr")[0]?parent.location.href=e.data.redirect_url:window.location.href=e.data.redirect_url:$plug.closeLoading()})}).catch(function(e){e.error&&(document.getElementById("card-errors").textContent=e.error.message)})}}]),e}();t.$dLocalPayment=new e}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(a,e){var t=function(){function e(){_classCallCheck(this,e),this.isLoad=!1,this.payment_url=null,this.inPaying=!1,this.iframeHeight=330,this.order_number=""}return _createClass(e,[{key:"initConfig",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};switch(e){case"orderNo":this.order_number=t.order_number}}},{key:"initEvent",value:function(){}},{key:"paymentSubmit",value:function(){this.payIframe.contentWindow.postMessage({type:"customSubmission"},"*")}},{key:"resetCreateOrderBtn",value:function(){if("fixed"==a("#flyway-payment-iframe").css("position")){var e=document.getElementById("flyway-payment-iframe");e.style.height=this.iframeHeight,e.style.position="static",e.style.top="auto",e.style.left="auto",e.style.transform="none",e.style.borderRadius="0",e.style.zIndex="auto"}this.cloasLoading()}},{key:"cloasLoading",value:function(){a(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1),0<a(".J-Loading").length&&(a(".J-MaskLoad, .J-Loading").hide(),a("html, body").removeClass("hidden"))}},{key:"showLoading",value:function(){a(".flyway-box").find(".J-flyway-pay-payment-form-loading").remove(),a(".flyway-box").append('<div class="J-flyway-pay-payment-form-loading shipping-methods-loading">\n\t\t\t\t<span class="methods-loading">\n\t\t\t\t\t<img src="/s/files/img/methods-load.png" alt="">\n\t\t\t\t</span>\n\t\t\t</div>'),a(".flyway-payment-form-warp").hide(),a(".J-flyway-pay-payment-form-loading").show()}},{key:"hideLoading",value:function(){a(".flyway-payment-form-warp").show(),a(".J-flyway-pay-payment-form-loading").hide()}},{key:"iframeLoaded",value:function(){var n=this;this.hideLoading(),a("#flyway-payment-iframe").show(),window.addEventListener("message",function(e){if(e.data){var t=n,a={customSubmissionValidated:function(){console.log("表单校验通过")},customSubmissionValidateError:function(){console.log("表单校验不通过",e.data.fields),t.cloasLoading()},customSubmissionPayError:function(){console.log("支付异常"),t.cloasLoading()},customSubmissionPaySuccess:function(){console.log("支付已提交"),t.cloasLoading()}}[e.data.type];a&&a()}})}},{key:"createIframe",value:function(){var e=this;a(".flyway-box").empty(),a(".flyway-box").append('<div id="flywayCardMessage"></div>'),a(".flyway-box").append('<div id="flyway_pay_data"></div>'),a(".flyway-box").append('<div class="flyway-payment-form-warp"></div>'),e.showLoading();var t=document.createElement("iframe");t.id="flyway-payment-iframe",t.width="100%",t.height=this.iframeHeight,t.src=this.payment_url,t.style.display="none",t.setAttribute("border","0"),t.setAttribute("frameborder","no"),t.setAttribute("marginwidth","0"),t.setAttribute("marginheight","0"),t.attachEvent?t.attachEvent("onload",function(){e.iframeLoaded()}):t.onload=function(){e.iframeLoaded()},a(".flyway-box").append(t),1<=a(".flyway-box").siblings(".J-SwitchPal").find(".np-ui-radio-active").length&&a(".flyway-box").show(),this.payIframe=t}},{key:"flywayPaySet",value:function(){var t=this;document.querySelector("#flyway-payment-iframe")||(this.showLoading(),a(".flyway-box").hide(),this.payment_url||this.isLoad||(this.isLoad=!0,$api.getFlywayPayInfo({order_number:this.order_number||sessionStorage.order_number}).then(function(e){t.payment_url=e.data.url+"&custom_submission=1&page_config_v2=0_0_0_0&hide_top=1&hide_footer=1",t.createIframe()})),this.payment_url&&(a(".flyway-box").removeClass("hidden"),this.createIframe()))}}]),e}();e.$flywayPay=new t}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(t,e){var a=function(){function e(){_classCallCheck(this,e),this.order_number=""}return _createClass(e,[{key:"init",value:function(e){}},{key:"initConfig",value:function(e,t){this[e]=t}},{key:"confirmPayment",value:function(e){var n=this;$api.getKlashaInfo(JSON.stringify(e)).then(function(e){if(0==e.code){n.order_number=e.data.orderNo;var t="sandbox"==e.data.env,a={currency:e.data.orderCurrency,phone_number:e.data.phone,email:e.data.email,fullname:e.data.fullname,tx_ref:e.data.orderNo,callBack:i};new KlashaClient(e.data.merchantKey,e.data.businessId,e.data.orderAmount,e.data.containerId,e.data.callback,e.data.orderCurrency,e.data.orderCurrency,a,t).init()}})}}]),e}();e.$klashaPayment=new a;var i=function(e){t("body").append('<div class="klasha-fixed"></div>'),e.hasOwnProperty("status")&&$api.klashaPayment({tnxRef:$klashaPayment.order_number}).then(function(e){window.location.href=e.data.url})}}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(n,e){var t=function(){function e(){_classCallCheck(this,e),this.order_number=""}return _createClass(e,[{key:"initConfig",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};switch(e){case"orderNo":this.order_number=t.order_number}}},{key:"transformToJson",value:function(e){var t={};for(var a in e)t[e[a].name]=e[a].value;return t}},{key:"pay",value:function(){var e=n("#oceanpayment-payForm").serializeArray();Oceanpayment.checkout(this.transformToJson(e))}},{key:"escapeHtml",value:function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"oceanpayEmbedded",value:function(){if(!n("#oceanpayment-element").html()){var e=n(".static-path").data("static-path")+"css/oceanpay.css";Oceanpayment.init(1==n(".J-OceanpayIsSandbox").val()||"",e)}}},{key:"submit",value:function(){var a=this;n("#oceanpayment-payForm").children().remove(),$plug.loading(NP_ENV.language[NP_ENV.language.lang].payment_in_progress),$api.oceanpayConfig({order_number:this.order_number||sessionStorage.order_number}).then(function(t){if(0===t.code){Object.keys(t.data);Object.keys(t.data).forEach(function(e){n("#oceanpayment-payForm").append('<input type="hidden" name="'+e+'" value="'+a.escapeHtml(t.data[e])+'" />')}),a.pay()}else n(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1),0<n(".J-Loading").length&&(n(".J-MaskLoad, .J-Loading").hide(),n("html, body").removeClass("hidden")),$plug.replaceParam(window.location.href,"error","PAYMENT_ERROR"),window.location.reload()})}}]),e}();e.$oceanpayPayment=new t,e.oceanpaymentCallBack=function(e){e.msg?(n(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1),0<n(".J-Loading").length&&(n(".J-MaskLoad, .J-Loading").hide(),n("html, body").removeClass("hidden"))):(console.log(e),$api.oceanpayResult({result:e}).then(function(e){console.log(e),0===e.code?window.location.href=e.data.url:(console.log("-----------123-----"),$plug.replaceParam(window.location.href,"error","PAYMENT_ERROR"),window.location.reload())}))}}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i,e){var t=function(){function e(){var n=this;_classCallCheck(this,e),this.credit_card_type="",this.isInit=!1,this.Pacypay=null,this.orderNumber=0,this.redirectUrl="",this.transactionId="",this.paymentConfig={locale:"en",environment:"sandbox",config:{checkoutTheme:"light",customCssURL:"",variables:{colorBackground:"#FFF",colorPrimary:"red",colorText:"#666",colorDanger:"red",borderRadius:"6px",fontSizeBase:"14px",fontFamily:"Arial, sans-serif"},styles:{".pacypay-checkout__payment-method":{"border-radius":"0","background-color":"transparent",border:"none"},".pacypay-checkout__payment-method__header":{display:"none"}},showPayButton:!1},onError:function(e){var t="string"==typeof e?JSON.parse(e):e,a=t.hasOwnProperty("respCode")?t.respCode:"20000";"1001"===a&&($plug.closeLoading(),i(".J-CreateOrder").removeClass("np-ui-btn-loading").removeClass("np-ui-disabled").removeProp("disabled")),"20000"!=a&&"1001"!=a&&(window.location.href=n.redirectUrl)},onPaymentCompleted:function(e){var t=e.data,a=e.respCode;e.respMsg;if("20000"===a)switch(t.status){case"S":window.location.href=n.redirectUrl;break;case"R":window.location.href=t.redirectUrl;break;default:window.location.href=n.redirectUrl}else window.location.href=n.redirectUrl}}}return _createClass(e,[{key:"init",value:function(e){var t=this;if(e&&(this.credit_card_type=e),""==this.transactionId&&!this.isInit&&""!=this.credit_card_type){var a={};this.orderNumber&&(a={order_number:this.orderNumber}),this.isInit=!0,$api.pacyPayV3Config(JSON.stringify(a)).then(function(e){0==e.code&&e.data?(t.transactionId=e.data.transactionId,t.paymentConfig.environment=e.data.environment,t.elementInit()):t.isInit=!1})}}},{key:"initConfig",value:function(e,t){"orderNo"==e&&(this.orderNumber=t,this.init())}},{key:"elementInit",value:function(){this.Pacypay=new Pacypay(this.transactionId,this.paymentConfig)}},{key:"onPaymentCompleted",value:function(e){var t=this;$api.pacyPayV3CheckOrder(JSON.stringify(e)).then(function(e){0==e.code&&(i(".J-PaymentMethod").find(".J-CreateOrder").addClass("np-ui-disabled").attr("disabled","disabled"),t.redirectUrl=e.data.successUrl,t.Pacypay.submit())})}}]),e}();e.$pacyPayPayment=new t}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(o,e){var t=function(){function e(){_classCallCheck(this,e),this.isLoad=!1,this.payment_url=null,this.inPaying=!1,this.iframeHeight=330,this.order_number="",this.show_type=""}return _createClass(e,[{key:"initConfig",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};switch(e){case"orderNo":this.order_number=t.order_number}}},{key:"resetCreateOrderBtn",value:function(){if("fixed"==o("#payid-payment-iframe").css("position")){var e=document.getElementById("payid-payment-iframe");e.style.height=this.iframeHeight,e.style.position="static",e.style.top="auto",e.style.left="auto",e.style.transform="none",e.style.borderRadius="0",e.style.zIndex="auto"}this.cloasLoading()}},{key:"cloasLoading",value:function(){o(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1),0<o(".J-Loading").length&&(o(".J-MaskLoad, .J-Loading").hide(),o("html, body").removeClass("hidden"))}},{key:"paymentSubmit",value:function(e,t){var a=this,n={};if(this.payment_url){if(!document.getElementById("payid_pay_data").value)return o("#payidCardMessage").attr("style","color:red").html("Card Info Error!"),void this.cloasLoading();n={order_number:this.order_number||t,cajipay_data:document.getElementById("payid_pay_data").value}}else{var i=e.pay_card_mmyy.split("/");n={order_number:this.order_number||t,cardNo:e.pay_card_number,cvv:e.pay_card_cvv,expYear:i[1],expMonth:i[0]}}$api.payidPayment(JSON.stringify(n)).then(function(e){0==e.code&&e.data.url&&(e.data.is_iframe?a.showFullScreenModal(e.data.url):window.location.href=e.data.url)})}},{key:"showFullScreenModal",value:function(e){var t=o('<div class="payid-full-screen-modal"></div>');t.append('<iframe src="'+e+'" sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-top-navigation allow-payment-request allow-fullscreen allow-popups-to-escape-sandbox  allow-modals" frameborder="0"></iframe>'),o("body").append(t),t.css({position:"fixed",top:0,left:0,width:"100%",height:"100%","background-color":"#FFF","z-index":9999,display:"flex","justify-content":"center","align-items":"center"}),t.find("iframe").css({width:"100%",height:"100%"}),t.show()}},{key:"showLoading",value:function(){o(".payid-pay-box").find(".J-payid-pay-payment-form-loading").remove(),o(".payid-pay-box").append('<div class="J-payid-pay-payment-form-loading shipping-methods-loading">\n\t\t\t\t<span class="methods-loading">\n\t\t\t\t\t<img src="/s/files/img/methods-load.png" alt="">\n\t\t\t\t</span>\n\t\t\t</div>'),o(".payid-payment-form-warp").hide(),o(".J-payid-pay-payment-form-loading").show()}},{key:"hideLoading",value:function(){o(".payid-payment-form-warp").show(),o(".J-payid-pay-payment-form-loading").hide()}},{key:"iframeLoaded",value:function(){this.hideLoading(),o("#payid-payment-iframe").show(),window.addEventListener("message",function(e){var t=e.data.eventType;e.origin||e.originalEvent.origin;switch(t&&console.log(t),t){case"GetCardKeySuccess":console.log("in cajipay_data_base64 .............."),o("#payidCardMessage").empty();var a=JSON.stringify(e.data);document.getElementById("payid_pay_data").value=a;break;case"GetCardKeyError":console.error("------------in error ---------"),document.getElementById("payid_pay_data").value="",o("#payidCardMessage").val(e.data.message)}})}},{key:"createIframe",value:function(){var e=this;o(".payid-pay-box").empty(),o(".payid-pay-box").append('<div id="payidCardMessage"></div>'),o(".payid-pay-box").append('<div id="payid_pay_data"></div>'),o(".payid-pay-box").append('<div class="payid-payment-form-warp"></div>'),e.showLoading();var t=document.createElement("iframe");t.id="payid-payment-iframe",t.width="100%",t.height=this.iframeHeight,t.src=this.payment_url,t.style.display="none",t.setAttribute("border","0"),t.setAttribute("frameborder","no"),t.setAttribute("marginwidth","0"),t.setAttribute("marginheight","0"),t.attachEvent?t.attachEvent("onload",function(){e.iframeLoaded()}):t.onload=function(){e.iframeLoaded()},o(".payid-pay-box").append(t),1<=o(".payid-pay-box").siblings(".J-SwitchPal").find(".np-ui-radio-active").length&&o(".payid-pay-box").show(),this.payIframe=t}},{key:"payidSet",value:function(){var t=this;2!=o(".J-allpayment_terminal").val()?document.querySelector("#payid-payment-iframe")||(this.showLoading(),o(".payid-pay-box").hide(),this.payment_url||this.isLoad||(this.isLoad=!0,$api.getPayIDCardUrl({order_number:this.order_number||sessionStorage.order_number}).then(function(e){console.log(e),0==e.code&&e.data.show_iframe?(o(".payid-pay-box").removeClass("hidden"),t.payment_url=e.data.iframe_url,t.iframeHeight=e.data.iframe_height,t.createIframe()):(o(".payid-pay-box").css("opacity","0").css("cssText","opacity:0!important").hide().empty(),t.hideLoading()),t.isLoad=!1})),this.payment_url&&(o(".payid-pay-box").removeClass("hidden"),this.createIframe())):o(".payid-pay-box").removeClass("hidden")}}]),e}();e.$payIDPayment=new t}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(a,e){var t=function(){function e(){_classCallCheck(this,e),this.isLoad=!1,this.payment_url=null,this.inPaying=!1,this.iframeHeight=330,this.order_number="",this.paymentObj={},this.amount=0,this.iframeLoaded=!1,this.isMobile=window.screen.availWidth<=768?"1":"0"}return _createClass(e,[{key:"initConfig",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};switch(e){case"orderNo":this.order_number=t.order_number;break;case"amount":this.amount=t.amount}}},{key:"closeLoading",value:function(){a(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1),0<a(".J-Loading").length&&(a(".J-MaskLoad, .J-Loading").hide(),a("html, body").removeClass("hidden"))}},{key:"createIframe",value:function(){var t=this;a("#payoneerSubmitBtnId").parent().remove(),a("#paypal-payment-button").parent().append('\n\t\t\t\t<div style="display: none;opacity: 0;"><button style="display: none;opacity: 0;width: 0;height: 0;" id="payoneerSubmitBtnId" type="button" className="submit-button" class="np-ui-btn np-ui-main-btn hidden">Complete order</button></div>\n\t\t\t'),a("#payoneerSubmitBtnId").hide(),a("#payoneerNetworksId").empty(),a("#payoneerNetworksId").checkoutList({payButton:"payoneerSubmitBtnId",listUrl:this.payment_url,widgetCssUrl:document.getElementById("payonner-css").href,smartSwitch:!1,providerRedirectInNewWindow:!1,fullPageLoading:!1,proceedFunction:function(e){console.log(e),t.closeLoading(),"PROCEED"==e.interaction.code&&"RETURN"==e.redirect.type?window.location.href=e.redirect.url:(console.error("onError === ",e.interaction.code),$plug.replaceParam(window.location.href,"error","PAYMENT_ERROR"),window.location.reload())}}),window.addEventListener("message",function(e){switch(t.iframeLoaded=!0,e.data.type){case"validation_response_event":t.closeLoading()}e.data.data&&e.data.data.providerResults&&e.data.data.providerResults.complete&&a(".payoneer-loading").removeClass("display-block").addClass("display-none")}),setTimeout(function(){t.iframeLoaded||(t.closeLoading(),a(".payoneer-loading").removeClass("display-block").addClass("display-none"))},15e3)}},{key:"payCardSet",value:function(){var t=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];a(".payoneer-error-msg").empty(),a(".payoneer-error-msg").removeClass("display-block").addClass("display-none"),e?(this.payment_url||this.isLoad||(this.isLoad=!0,$api.payoneerCreatePayment({order_number:this.order_number}).then(function(e){0==e.code?(t.payment_url=e.data.toUrl,t.paymentObj=e.data,t.createIframe()):(console.error(e.msg),a(".payoneer-error-msg").html(e.msg),a(".payoneer-loading").removeClass("display-none").addClass("display-block"),a(".payoneer-loading").removeClass("display-block").addClass("display-none")),t.isLoad=!1})),this.payment_url&&!a("#payoneerSubmitBtnId").html()&&this.createIframe()):$api.payoneerUpdatePayment({order_number:this.order_number||sessionStorage.order_number}).then(function(e){0==e.code?a("#payoneerSubmitBtnId").click():(t.closeLoading(),console.error(e.msg),$plug.replaceParam(window.location.href,"error","PAYMENT_ERROR"),window.location.reload())})}}]),e}();e.$payoneerPayment=new t}(jQuery,window);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i,e){var t=function(){function e(){_classCallCheck(this,e),this.isOpenDrawerCart=!1,this.cartToken=""}return _createClass(e,[{key:"init",value:function(e){this.cartToken=e,this.isOpenDrawerCart||(this.isOpenDrawerCart=!0,0<i("#paypal-button-cart-drawer").length&&this.pay({id:"#paypal-button-cart-drawer",type:1,bool:!0,paymentType:"paypal"}),0<i("#paypal-button-cart").length&&this.pay({id:"#paypal-button-cart",type:1,bool:!0,paymentType:"paypal"}))}},{key:"pay",value:function(a){if(i(".placeholder-line").hide(),"object"!=("undefined"==typeof paypal?"undefined":_typeof(paypal)))return!1;var n=this,e={env:NP_ENV.PAYPAL_ENV,locale:"en_US",onClick:function(){},createOrder:function(e,t){console.log("测试SDK加载是否有问题，w.$paypalPayment = new paypalPayment()");var a={cart_type:"1",cartToken:this.cartToken,user_action:"CONTINUE"};return fetch("/payment/paypal-union/create-order",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return e.data.token})},onApprove:function(e,t){if(1==a.type)return fetch("/payment/paypal-union/save-payment-token-info",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(0==e.code){if(!a.bool)return fetch("/payment/paypal-union/get-order-info",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({})}).then(function(e){return e.json()}).then(function(e){0==e.code&&e.data&&e.data.buyer&&(n.isBuyQuickly=1,n.paymethod="paypal",n.makePayButton(),i(".J-paypal-payment").hide(),i(".J-PaymentMethod").remove(),i(".J-placeShipping").find(".btn-text").text(NP_ENV.language[NP_ENV.language.lang].btn_complete_order),i(".J-CustomerInfor").find(".paypal-checkout-tips").text(NP_ENV.language[NP_ENV.language.lang].paypal).addClass("paypal-remembered-tips"),!n.isExistCacheAddress&&n.setCacheAddress(e.data.buyer,"paypal"))});console.log("获取跳转: _this.cartToken ==> /payment/paypal-union/save-payment-token-info",n.cartToken),localStorage.removeItem(n.cartToken+"_step"),localStorage.removeItem(n.cartToken+"_step_current"),localStorage.removeItem("user_select_insurance"),localStorage.removeItem("order_tip"),localStorage.removeItem("card-remark"),window.location.href="/checkouts/"+n.cartToken+"?step=contact_information"}})},onCancel:function(e,t){i(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1),0<i(".J-Loading").length&&i(".J-MaskLoad, .J-Loading").hide()},onError:function(e){}};e.commit=1!=a.type,e.style={layout:1==a.type?"horizontal":"vertical",size:"responsive",color:"gold",shape:"rect",label:"paypal",maxbuttons:1,height:44,tagline:!1},"object"==("undefined"==typeof paypal?"undefined":_typeof(paypal))&&paypal.Buttons(e).render(a.id)}}]),e}();e.$paypalPayment=new t}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(a,e){var t=function(){function e(){_classCallCheck(this,e),this.isLoad=!1,this.iframeHeight=250,this.order_number="",this.call_back="",this.pay_method="",this.pk_secret="",this.pay_type=""}return _createClass(e,[{key:"initConfig",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};switch(e){case"orderNo":this.order_number=t.order_number}}},{key:"paymentSubmit",value:function(e){var t=this;console.log(e),3==this.pay_method&&(e=e+"&pk_secret="+this.pk_secret,window.location.href=e),1!=this.pay_method&&2!=this.pay_method||(console.log("in iframe submit"),6==this.pay_type?window.submitTopayPayType6():window.submitPaysnaa(),setTimeout(function(){t.closeLoading()},5e3))}},{key:"showLoading",value:function(){a(".paysnaa-box").find(".J-paysnaa-pay-payment-form-loading").remove(),a(".paysnaa-box").append('<div class="J-paysnaa-pay-payment-form-loading shipping-methods-loading">\n\t\t\t\t<span class="methods-loading">\n\t\t\t\t\t<img src="/s/files/img/methods-load.png" alt="">\n\t\t\t\t</span>\n\t\t\t</div>'),a(".paysnaa-payment-form-warp").hide(),a(".J-paysnaa-pay-payment-form-loading").show()}},{key:"hideLoading",value:function(){a(".paysnaa-payment-form-warp").show(),a(".J-paysnaa-pay-payment-form-loading").hide()}},{key:"closeLoading",value:function(){a(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1),0<a(".J-Loading").length&&(a(".J-MaskLoad, .J-Loading").hide(),a("html, body").removeClass("hidden"))}},{key:"iframeLoaded",value:function(){this.hideLoading(),a("#stripe-pay-iframe").show(),window.addEventListener("message",function(e){})}},{key:"createIframe",value:function(){var e=this;a(".paysnaa-box").css({padding:"",border:""}).empty(),e.showLoading(),2==this.pay_method&&(this.iframeHeight=350);var t=document.createElement("iframe");t.id="stripe-pay-iframe",t.width="100%",t.height=this.iframeHeight,t.src=this.call_back,t.style.display="none",t.setAttribute("border","0"),t.setAttribute("frameborder","no"),t.setAttribute("marginwidth","0"),t.setAttribute("marginheight","0"),t.attachEvent?t.attachEvent("onload",function(){e.iframeLoaded()}):t.onload=function(){e.iframeLoaded()},a(".paysnaa-box").append(t),this.payIframe=t}},{key:"closeEvent",value:function(){a(".J-SwitchPal").on("click",function(){var e=a(this).siblings(".order-paypal-box.paysnaa-box");e.length?(e.css("height","auto"),a(".unick-payment-form-box").css("height","auto"),a(".rush-payment-form-box").css("height","auto")):e.stop().slideDown(300,function(){e.css("height","auto"),a(".unick-payment-form-box").css("height","auto"),a(".rush-payment-form-box").css("height","auto")})}),3==this.pay_method?a(".paysnaa-box").css({padding:"0",border:"0"}).empty().hide():a(".paysnaa-box").css({padding:"",border:""})}},{key:"paysnaaSet",value:function(){var t=this;this.isLoad||(this.isLoad=!0,0<=!this.pay_method?(this.closeEvent(),$api.paysnaaPayment({order_number:this.order_number||sessionStorage.order_number}).then(function(e){0==e.code&&0<=e.data.pay_method&&(t.call_back=e.data.call_back,t.pay_method=e.data.pay_method,t.pk_secret=e.data.pk_secret,t.pay_type=e.data.pay_type,1==t.pay_method||2==t.pay_method?t.createIframe():t.closeEvent())})):1==this.pay_method||2==this.pay_method?this.createIframe():this.closeEvent())}}]),e}();e.$paysnaaPayment=new t}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(a,e){var t=function(){function e(){_classCallCheck(this,e),this.isLoad=!1,this.payment_url=null,this.inPaying=!1,this.checkout_id="",this.order_number="",this.rapydCheckout=null}return _createClass(e,[{key:"initConfig",value:function(e,t){switch(e){case"orderNo":this.order_number=t.order_number}}},{key:"initRapydConfig",value:function(){console.log("this.checkout_id="+this.checkout_id),""!=this.checkout_id&&this.checkout_id&&(console.log("2222222222222222222333333"),1<=a("#rapyd-checkout iframe").length&&a("#rapyd-checkout iframe")[0].remove(),this.rapydCheckout=new RapydCheckoutToolkit({pay_button_text:"Click to pay",pay_button_color:"blue",id:this.checkout_id,wait_on_payment_confirmation:!1,wait_on_payment_redirect:!1,hide_submit_button:!0,close_on_complete:!1,page_type:"collection"}),console.log(this.rapydCheckout),this.rapydCheckout.displayCheckout(),this.initEvent())}},{key:"closeLoading",value:function(){a(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1),0<a(".J-Loading").length&&(a(".J-MaskLoad, .J-Loading").hide(),a("html, body").removeClass("hidden"))}},{key:"hideLoading",value:function(){a(".rapyd-loading").hide()}},{key:"showLoading",value:function(){a(".rapyd-loading").show()}},{key:"paymentSubmit",value:function(){var e=this;document.getElementById("rapyd-checkout-frame").contentWindow.postMessage({type:"CHECKOUT_SUBMIT_PAYMENT"},"*"),setTimeout(function(){e.closeLoading()},5e3)}},{key:"initEvent",value:function(){var t=this;window.addEventListener("onCheckoutPaymentSuccess",function(e){console.log(e.detail),"3d_verification"!=e.detail.next_action?$api.rapydReturnUrl({checkout_id:t.checkout_id}).then(function(e){t.closeLoading(),e.data.url&&(window.location.href=e.data.url)}):window.location.href=e.detail.redirect_url}),window.addEventListener("onCheckoutPaymentFailure",function(e){console.error(e.detail.error),t.closeLoading(),$api.getLoggerInfo({type:"rapyd",msg:JSON.stringify(e.detail.error||{error:"onCheckoutPaymentFailure"})})}),window.addEventListener("onLoading",function(e){console.log(e.detail.loading),e.detail.loading||(a("#rapyd-checkout").css("height","480px"),t.hideLoading())}),window.addEventListener("onCheckoutPaymentPending",function(e){console.log(e.detail)}),window.addEventListener("onCheckoutPaymentExpired",function(e){console.error(e.detail.error)}),window.addEventListener("onCheckoutUpdateCardSuccess",function(e){console.log(e.detail)}),window.addEventListener("onCheckoutDeleteCardSuccess",function(e){console.log(e.detail)})}},{key:"rapydPaySet",value:function(){var t=this;!this.isLoad&&sessionStorage.order_number&&(this.isLoad=!0,this.checkout_id="",a("#rapyd-checkout").css("height","20px").empty(),this.showLoading(),$api.rapydPayment({order_number:this.order_number||sessionStorage.order_number}).then(function(e){console.log(e),1==e.data.status?(t.checkout_id=e.data.checkout_id,t.initRapydConfig()):$api.getLoggerInfo({type:"rapyd",msg:JSON.stringify(e)})}).catch(function(e){}))}}]),e}();e.$rapydPayment=new t}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(a,e){var t=function(){function e(){_classCallCheck(this,e),this.isLoad=!1,this.payment_url=null,this.inPaying=!1,this.iframeHeight=330,this.order_number="",this.paymentObj={}}return _createClass(e,[{key:"initConfig",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};switch(e){case"orderNo":this.order_number=t.order_number}}},{key:"resetCreateOrderBtn",value:function(){if("fixed"==a("#scpay-card-payment-iframe").css("position")){var e=document.getElementById("scpay-card-payment-iframe");e.style.height=this.iframeHeight,e.style.position="static",e.style.top="auto",e.style.left="auto",e.style.transform="none",e.style.borderRadius="0",e.style.zIndex="auto"}a(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1),0<a(".J-Loading").length&&(a(".J-MaskLoad, .J-Loading").hide(),a("html, body").removeClass("hidden"))}},{key:"resetIframeParameter",value:function(){0<a(".J-Loading").length&&(a(".J-MaskLoad, .J-Loading").hide(),a("html, body").removeClass("hidden"));var e=document.getElementById("scpay-card-payment-iframe");e.style.width="100%",e.style.height="100%",e.style.height="white",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.borderRadius="4px",e.style.zIndex="102"}},{key:"paymentSubmit",value:function(){$plug.loading(NP_ENV.language[NP_ENV.language.lang].payment_in_progress),console.log("paymentSubmit"),this.payIframe.contentWindow.postMessage({event:"submit"},"*")}},{key:"showLoading",value:function(){a(".scpay-card-payment-form-box").find(".J-scpay-card-payment-form-loading").remove(),a(".scpay-card-payment-form-box").append('<div class="J-scpay-card-payment-form-loading shipping-methods-loading">\n\t\t\t\t<span class="methods-loading">\n\t\t\t\t\t<img src="'+a(".static-path").data("static-path")+'img/methods-load.png" alt="">\n\t\t\t\t</span>\n\t\t\t</div>'),a(".scpay-card-payment-form-warp").hide(),a(".J-scpay-card-payment-form-loading").show()}},{key:"hideLoading",value:function(){a(".scpay-card-payment-form-warp").show(),a(".J-scpay-card-payment-form-loading").hide()}},{key:"iframeLoaded",value:function(){var t=this;this.hideLoading(),window.addEventListener("message",function(e){switch(console.log(e.data),e.data.event){case"payment_success":case"payment_failed":t.resetCreateOrderBtn();break;case"3dPayment":t.resetIframeParameter()}})}},{key:"createIframe",value:function(){var e=this,t=document.createElement("iframe");t.id="scpay-card-payment-iframe",t.width="100%",t.height=this.iframeHeight,t.src=this.payment_url,t.setAttribute("border","0"),t.setAttribute("frameborder","no"),t.setAttribute("marginwidth","0"),t.setAttribute("marginheight","0"),t.attachEvent?t.attachEvent("onload",function(){e.iframeLoaded()}):t.onload=function(){e.iframeLoaded()},a(".scpay-card-payment-form-warp").empty(),a(".scpay-card-payment-form-warp")[0].append(t),this.payIframe=t}},{key:"scpayCardSet",value:function(){var t=this;document.querySelector("#scpay-card-payment-iframe")||(this.showLoading(),this.payment_url||this.isLoad||(this.isLoad=!0,$api.scpayCardCreatePayment({order_number:this.order_number}).then(function(e){0==e.code?(t.payment_url=e.data.payment_url,t.paymentObj=e.data,t.iframeHeight=e.data.height,t.createIframe()):(console.error(e.msg),t.hideLoading()),t.isLoad=!1})),this.payment_url&&this.createIframe())}}]),e}();e.$scPayCardPayment=new t}(jQuery,window);var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i,e){var t=function(){function e(){_classCallCheck(this,e),this.isLoad=!1,this.payment_url=null,this.inPaying=!1,this.iframeHeight=330,this.order_number=""}return _createClass(e,[{key:"initConfig",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};switch(e){case"orderNo":this.order_number=t.order_number}}},{key:"resetCreateOrderBtn",value:function(){if("fixed"==i("#walletpay-payment-iframe").css("position")){var e=document.getElementById("walletpay-payment-iframe");e.style.height=this.iframeHeight,e.style.position="static",e.style.top="auto",e.style.left="auto",e.style.transform="none",e.style.borderRadius="0",e.style.zIndex="auto"}this.cloasLoading()}},{key:"cloasLoading",value:function(){i(".J-CreateOrder").removeClass("np-ui-btn-loading").prop("disabled",!1),0<i(".J-Loading").length&&(i(".J-MaskLoad, .J-Loading").hide(),i("html, body").removeClass("hidden"))}},{key:"paymentSubmit",value:function(e,t){var a={};if(this.payment_url){if(!document.getElementById("wallet_pay_data").value)return i("#walletPayCardMessage").attr("style","color:red").html("Card Info Error!"),void this.cloasLoading();a={order_number:this.order_number||t,cajipay_data:document.getElementById("wallet_pay_data").value}}else{var n=e.pay_card_mmyy.split("/");a={order_number:this.order_number||t,cardNo:e.pay_card_number,cvv:e.pay_card_cvv,expYear:n[1],expMonth:n[0]}}$api.allPayment(JSON.stringify(a)).then(function(e){0==e.code&&e.data.redirect_url&&(window.location.href=e.data.redirect_url)})}},{key:"showLoading",value:function(){i(".wallet-pay-box").find(".J-wallet-pay-payment-form-loading").remove(),i(".wallet-pay-box").append('<div class="J-wallet-pay-payment-form-loading shipping-methods-loading">\n\t\t\t\t<span class="methods-loading">\n\t\t\t\t\t<img src="/s/files/img/methods-load.png" alt="">\n\t\t\t\t</span>\n\t\t\t</div>'),i(".wallet-payment-form-warp").hide(),i(".J-wallet-pay-payment-form-loading").show()}},{key:"hideLoading",value:function(){i(".wallet-payment-form-warp").show(),i(".J-wallet-pay-payment-form-loading").hide()}},{key:"iframeLoaded",value:function(){this.hideLoading(),i("#walletpay-payment-iframe").show(),window.addEventListener("message",function(e){var t=e.data.eventType;e.origin||e.originalEvent.origin;switch(t&&console.log(t),t){case"GetCardKeySuccess":console.log("in cajipay_data_base64 .............."),i("#walletPayCardMessage").empty();var a=JSON.stringify(e.data);document.getElementById("wallet_pay_data").value=a;break;case"GetCardKeyError":console.error("------------in error ---------"),document.getElementById("wallet_pay_data").value="",i("#walletPayCardMessage").val(e.data.message)}})}},{key:"createIframe",value:function(){var e=this;i(".wallet-pay-box").empty(),i(".wallet-pay-box").append('<div id="walletPayCardMessage"></div>'),i(".wallet-pay-box").append('<div id="wallet_pay_data"></div>'),i(".wallet-pay-box").append('<div class="wallet-payment-form-warp"></div>'),e.showLoading();var t=document.createElement("iframe");t.id="walletpay-payment-iframe",t.width="100%",t.height=this.iframeHeight,t.src=this.payment_url,t.style.display="none",t.setAttribute("border","0"),t.setAttribute("frameborder","no"),t.setAttribute("marginwidth","0"),t.setAttribute("marginheight","0"),t.attachEvent?t.attachEvent("onload",function(){e.iframeLoaded()}):t.onload=function(){e.iframeLoaded()},i(".wallet-pay-box").append(t),1<=i(".wallet-pay-box").siblings(".J-SwitchPal").find(".np-ui-radio-active").length&&i(".wallet-pay-box").show(),this.payIframe=t}},{key:"walletPaySet",value:function(){var t=this;2!=i(".J-allpayment_terminal").val()?document.querySelector("#walletpay-payment-iframe")||(this.showLoading(),i(".wallet-pay-box").hide(),this.payment_url||this.isLoad||(this.isLoad=!0,$api.getWalletPayCardUrl({order_number:this.order_number}).then(function(e){console.log(e),0==e.code&&e.data.show_iframe?(i(".wallet-pay-box").removeClass("hidden"),t.payment_url=e.data.iframe_url,t.iframeHeight=e.data.iframe_height,t.createIframe()):(i(".wallet-pay-box").css("opacity","0").css("cssText","opacity:0!important").hide().empty(),t.hideLoading()),t.isLoad=!1})),this.payment_url&&(i(".wallet-pay-box").removeClass("hidden"),this.createIframe())):i(".wallet-pay-box").removeClass("hidden")}}]),e}();e.$walletPayment=new t}(jQuery,window);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i,e){var t=function(){function e(){_classCallCheck(this,e),this.xb=null,this.isLoad=!1,this.orderNumber=0,this.sessionToken="",this.payType=5,this.config={formWrapperId:"xb-form-element",mode:"test",version:"3.0",access_type:"s2s",trans_channel:"cc",trans_type:"paymentMethod"}}return _createClass(e,[{key:"initConfig",value:function(e,t){"orderNo"==e&&(this.orderNumber=t),"mode"==e&&(this.config.mode=t)}},{key:"elementInit",value:function(){i("#xb-form-element").empty(),this.xb&&this.xb.elementInit(this.config)}},{key:"getxborderToken",value:function(e){var t=this;if(this.payType=e,this.isLoad)return this.sessionToken&&(this.xb=XborderPay(this.sessionToken),this.elementInit()),!1;this.isLoad=!0,5==this.payType&&$api.getXBorderToken().then(function(e){t.processTokenResults(e)}),8==this.payType&&$api.getEtracinPayToken().then(function(e){t.processTokenResults(e)})}},{key:"processTokenResults",value:function(e){var t=this,a=null,n=0;if(!e.hasOwnProperty("session_token"))return $api.getLoggerInfo({type:5==this.payType?"xborder":"EtracinPay",msg:JSON.stringify(e)}),!1;this.sessionToken=e.session_token,clearInterval(a),a=setInterval(function(){n++,"function"==typeof XborderPay&&0<i("#xb-form-element").length&&(t.xb=XborderPay(t.sessionToken),t.elementInit(),clearInterval(a)),8==n&&($api.getLoggerInfo({type:5==t.payType?"xborder":"EtracinPay",msg:(5==t.payType?"xborder":"EtracinPay")+" SDK加载失败，原因：SDK地址问题或加载超时！"}),clearInterval(a))},1e3)}},{key:"addLoading",value:function(){}},{key:"removeLoading",value:function(){}},{key:"xborderEmbedded",value:function(){}},{key:"confirmPaymentMethodOrder",value:function(){this.confirmPaymentM()}},{key:"confirmPaymentM",value:function(){var t=this;this.xb&&this.xb.confirmPaymentMethod().then(function(e){t.isLoad=!1,e.hasOwnProperty("data")&&"object"==_typeof(e.data)&&0==e.data.error&&t.xborderInnerCapture(),e.data.error&&i(".J-MaskLoad, .J-Loading").hide()}).catch(function(e){t.isLoad=!1,t.getxborderToken(),$api.getLoggerInfo({type:5==t.payType?"xborder":"EtracinPay",msg:"xb.confirmPaymentMethod执行失败，重新获取token. "+JSON.stringify(e)})})}},{key:"xborderInnerCapture",value:function(){var t=this,e={order_number:this.orderNumber,token:this.sessionToken};5==this.payType&&$api.xBorderPayCapture(JSON.stringify(e)).then(function(e){t.processCaptureResults(e)}),8==this.payType&&$api.etracinPayCapture(JSON.stringify(e)).then(function(e){t.processCaptureResults(e)})}},{key:"processCaptureResults",value:function(e){if(0==e.code){if(e.html){var t=document.createElement("iframe");t.id="xborder",t.srcdoc=e.html,document.body.appendChild(t)}e.data&&e.data.url&&(window.location.href=e.data.url)}else $api.getLoggerInfo({type:5==this.payType?"xborder":"EtracinPay",msg:(5==this.payType?"xborder":"EtracinPay")+" 支付失败，原因: "+JSON.stringify(e)})}}]),e}();e.$xborderPayment=new t}(jQuery,window);